<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BenchSight Admin Portal - Preview</title>
<style>
:root {
    --bg-dark: #0a0a0f;
    --bg-panel: #12121a;
    --bg-card: #1a1a24;
    --border-color: #2a2a3a;
    --text-primary: #e0e0e0;
    --text-secondary: #888;
    --accent-blue: #00d4ff;
    --accent-green: #00ff88;
    --accent-red: #ff4444;
    --accent-orange: #ff8800;
    --accent-purple: #aa66ff;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Consolas', 'Monaco', monospace;
    background: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100vh;
}

.norad-header {
    background: linear-gradient(180deg, #1a1a2e 0%, #0a0a0f 100%);
    border-bottom: 1px solid var(--accent-blue);
    padding: 15px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
}

.norad-title {
    font-size: 24px;
    font-weight: bold;
    color: var(--accent-blue);
    text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    letter-spacing: 3px;
}

.norad-status {
    display: flex;
    gap: 20px;
    font-size: 12px;
}

.status-item {
    display: flex;
    align-items: center;
    gap: 5px;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

.status-dot.green { background: var(--accent-green); box-shadow: 0 0 10px var(--accent-green); }
.status-dot.blue { background: var(--accent-blue); box-shadow: 0 0 10px var(--accent-blue); }
.status-dot.orange { background: var(--accent-orange); box-shadow: 0 0 10px var(--accent-orange); }

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.norad-nav {
    display: flex;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-color);
}

.nav-item {
    padding: 15px 25px;
    color: var(--text-secondary);
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.3s;
    cursor: pointer;
}

.nav-item:hover, .nav-item.active {
    color: var(--accent-blue);
    border-bottom-color: var(--accent-blue);
    background: rgba(0, 212, 255, 0.05);
}

.norad-content {
    padding: 20px;
    max-width: 1400px;
    margin: 0 auto;
}

.stat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
}

.stat-box {
    background: var(--bg-panel);
    border: 1px solid var(--border-color);
    padding: 20px;
    text-align: center;
    border-radius: 8px;
}

.stat-value {
    font-size: 32px;
    font-weight: bold;
    color: var(--accent-blue);
}

.stat-label {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 5px;
    text-transform: uppercase;
}

.panel {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 20px;
    overflow: hidden;
}

.panel-header {
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
    font-size: 14px;
    color: var(--accent-blue);
    text-transform: uppercase;
    letter-spacing: 2px;
    background: var(--bg-panel);
}

.panel-body {
    padding: 20px;
}

.btn {
    padding: 10px 20px;
    border: 1px solid var(--accent-blue);
    background: transparent;
    color: var(--accent-blue);
    cursor: pointer;
    font-family: inherit;
    font-size: 14px;
    transition: all 0.3s;
    border-radius: 4px;
    text-decoration: none;
    display: inline-block;
    margin: 5px;
}

.btn:hover {
    background: var(--accent-blue);
    color: var(--bg-dark);
}

.btn-success { border-color: var(--accent-green); color: var(--accent-green); }
.btn-success:hover { background: var(--accent-green); }

.btn-warning { border-color: var(--accent-orange); color: var(--accent-orange); }
.btn-warning:hover { background: var(--accent-orange); }

.game-card {
    background: var(--bg-panel);
    border: 1px solid var(--border-color);
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 4px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.game-card.tracked { border-left: 3px solid var(--accent-green); }
.game-card.partial { border-left: 3px solid var(--accent-orange); }

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

th {
    background: var(--bg-panel);
    color: var(--accent-blue);
    font-size: 11px;
    text-transform: uppercase;
}

.preview-notice {
    background: rgba(170, 102, 255, 0.1);
    border: 1px solid var(--accent-purple);
    color: var(--accent-purple);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    text-align: center;
}

.workflow-diagram {
    background: var(--bg-panel);
    padding: 30px;
    border-radius: 8px;
    font-family: monospace;
    font-size: 12px;
    line-height: 1.6;
    overflow-x: auto;
    margin: 20px 0;
}

.workflow-step {
    display: inline-block;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    padding: 10px 20px;
    border-radius: 4px;
    margin: 5px;
}

.workflow-arrow {
    color: var(--accent-blue);
    margin: 0 10px;
}
</style>
</head>
<body>

<!-- ================================================================== -->
<!-- CHANGELOG - MUST BE UPDATED WITH EVERY MODIFICATION -->
<!-- ================================================================== -->
<!--
CHANGELOG:
---------------------------------------------------------------------------
2026-01-06 v8.0.5:
  - CRITICAL FIX: Restored 4 missing src/advanced/ modules:
    * create_additional_tables.py
    * enhance_all_stats.py
    * final_stats_enhancement.py
    * extended_tables.py
  - Created fact_events_player.csv (7,476 rows)
  - Extended tables now run: +15 tables created
  - Table count: 131 (54 dim, 73 fact, 3 QA, 1 other)
  - Added comprehensive code audit documentation
  - Fixed column name mismatches (Type -> event_type)

2026-01-06 v8.0.4:
  - CRITICAL: Recovered 72 missing tables from v7 backup
  - Table count restored from 53 to 130
  - Created 4 new outcome dimension tables
  - Regenerated ERD with all tables
  - Added table integrity tests

2026-01-05 v8.0.0:
  - Major schema expansion: 96 -> 111 tables planned
  - Added 317 player metrics
  - Created comprehensive foreign key relationships
  - Added QA validation tables

RULES FOR UPDATING THIS CHANGELOG:
1. ALWAYS add entry BEFORE making changes
2. Include: date, version, what changed, table counts
3. Never delete old entries
4. Be specific about what was added/changed/removed
---------------------------------------------------------------------------
-->


<header class="norad-header">
    <div class="norad-title">‚óà BENCHSIGHT COMMAND</div>
    <div class="norad-status">
        <div class="status-item">
            <div class="status-dot green"></div>
            <span>PREVIEW MODE</span>
        </div>
        <div class="status-item">
            <div class="status-dot blue"></div>
            <span id="currentTime"></span>
        </div>
        <div class="status-item">
            <div class="status-dot orange"></div>
            <span>9 GAMES</span>
        </div>
    </div>
</header>

<nav class="norad-nav">
    <div class="nav-item active" onclick="showTab('dashboard')">‚óâ DASHBOARD</div>
    <div class="nav-item" onclick="showTab('blb')">‚óâ BLB TABLES</div>
    <div class="nav-item" onclick="showTab('tracker')">‚óâ TRACKER</div>
    <div class="nav-item" onclick="showTab('etl')">‚óâ ETL PIPELINE</div>
    <div class="nav-item" onclick="showTab('reports')">‚óâ REPORTS</div>
    <div class="nav-item" onclick="showTab('notes')">‚óâ NOTES</div>
</nav>

<div class="norad-content">

    <div class="preview-notice">
        üìå This is a <strong>static preview</strong> of the Admin Portal. 
        To run the full interactive version: <code>python admin_portal.py</code> ‚Üí Open <code>http://localhost:5000</code>
    </div>

    <!-- DASHBOARD TAB -->
    <div id="dashboard" class="tab-content active">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà SYSTEM OVERVIEW</h2>
        
        <div class="stat-grid">
            <div class="stat-box">
                <div class="stat-value">335</div>
                <div class="stat-label">Players</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">26</div>
                <div class="stat-label">Teams</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">9</div>
                <div class="stat-label">Games</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">8</div>
                <div class="stat-label">Tracked</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">24K</div>
                <div class="stat-label">Events</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">43</div>
                <div class="stat-label">Output Files</div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà MVP WORKFLOW</div>
            <div class="panel-body">
                <div class="workflow-diagram">
                    <span class="workflow-step">1Ô∏è‚É£ Upload BLB_Tables</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">2Ô∏è‚É£ Open Tracker</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">3Ô∏è‚É£ Track Game</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">4Ô∏è‚É£ Save Backup</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">5Ô∏è‚É£ Publish</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">6Ô∏è‚É£ Run ETL</span>
                    <span class="workflow-arrow">‚Üí</span>
                    <span class="workflow-step">7Ô∏è‚É£ View Reports</span>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà TRACKED GAMES</div>
            <div class="panel-body">
                <div class="game-card tracked">
                    <div><strong>Game 18987</strong> - Velociraptors vs Black Widows</div>
                    <div style="color: var(--text-secondary);">3,084 events | 106 shifts</div>
                </div>
                <div class="game-card tracked">
                    <div><strong>Game 18981</strong> - Velociraptors vs Orpans</div>
                    <div style="color: var(--text-secondary);">2,428 events | 106 shifts</div>
                </div>
                <div class="game-card tracked">
                    <div><strong>Game 18977</strong> - Velociraptors vs Ringers</div>
                    <div style="color: var(--text-secondary);">2,527 events | 88 shifts</div>
                </div>
                <div class="game-card tracked">
                    <div><strong>Game 18969</strong> - Velociraptors vs Capitals</div>
                    <div style="color: var(--text-secondary);">3,596 events | 98 shifts</div>
                </div>
                <div class="game-card partial">
                    <div><strong>Game 18965</strong> - Velociraptors vs Wolfpack</div>
                    <div style="color: var(--text-secondary);">3,999 events | 98 shifts</div>
                </div>
            </div>
        </div>
    </div>

    <!-- BLB TAB -->
    <div id="blb" class="tab-content">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà BLB TABLES MANAGEMENT</h2>
        
        <div class="panel">
            <div class="panel-header">‚óà UPLOAD BLB_TABLES.XLSX</div>
            <div class="panel-body">
                <p style="color: var(--text-secondary);">Upload your master BLB_Tables.xlsx file containing rosters, schedules, and dimensions.</p>
                <br>
                <button class="btn btn-success" onclick="alert('Run admin_portal.py for file upload')">Upload File</button>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà AVAILABLE SHEETS</div>
            <div class="panel-body">
                <button class="btn">dim_player (335 rows)</button>
                <button class="btn">dim_team (26 rows)</button>
                <button class="btn">dim_schedule (552 rows)</button>
                <button class="btn">fact_gameroster (14,239 rows)</button>
                <button class="btn">fact_box_score</button>
                <button class="btn">dim_dates</button>
            </div>
        </div>
    </div>

    <!-- TRACKER TAB -->
    <div id="tracker" class="tab-content">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà GAME TRACKER</h2>
        
        <div class="panel">
            <div class="panel-header">‚óà TRACKER CONTROLS</div>
            <div class="panel-body">
                <a href="../tracker/tracker_v19.html" class="btn btn-success" target="_blank">Open Tracker in New Tab</a>
                <button class="btn btn-warning">Save Backup</button>
                <button class="btn">Publish to Data</button>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà TRACKER PREVIEW</div>
            <div class="panel-body" style="text-align: center; padding: 40px;">
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    The tracker is a full-featured HTML tool for logging events and shifts during game video review.
                </p>
                <a href="../tracker/tracker_v19.html" class="btn btn-success" target="_blank" style="font-size: 18px; padding: 15px 30px;">
                    üèí Open Tracker v16
                </a>
            </div>
        </div>
    </div>

    <!-- ETL TAB -->
    <div id="etl" class="tab-content">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà ETL PIPELINE CONTROL</h2>
        
        <div class="stat-grid">
            <div class="stat-box">
                <div style="color: var(--accent-green); font-size: 20px;">STAGE</div>
                <div class="stat-label">Load raw data</div>
            </div>
            <div class="stat-box">
                <div style="color: var(--accent-orange); font-size: 20px;">INTERMEDIATE</div>
                <div class="stat-label">Transform data</div>
            </div>
            <div class="stat-box">
                <div style="color: var(--accent-blue); font-size: 20px;">DATAMART</div>
                <div class="stat-label">Build outputs</div>
            </div>
            <div class="stat-box">
                <div style="color: var(--accent-purple); font-size: 20px;">FULL</div>
                <div class="stat-label">All stages</div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà PIPELINE EXECUTION</div>
            <div class="panel-body">
                <p style="color: var(--text-secondary); margin-bottom: 15px;">
                    Run the ETL pipeline to process tracking data into analytics-ready output tables.
                </p>
                <button class="btn btn-success">Run Full Pipeline</button>
                <button class="btn">Run Stage Only</button>
                <button class="btn">Run Intermediate Only</button>
                <button class="btn">Run Datamart Only</button>
            </div>
        </div>
    </div>

    <!-- REPORTS TAB -->
    <div id="reports" class="tab-content">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà DASHBOARD & REPORTS</h2>
        
        <div class="panel">
            <div class="panel-header">‚óà PREVIEW DASHBOARDS</div>
            <div class="panel-body">
                <a href="dashboard_static.html" class="btn" target="_blank">üìä Main Dashboard</a>
                <a href="game_summary.html" class="btn" target="_blank">üèí Game Summary</a>
                <a href="player_card.html" class="btn" target="_blank">üë§ Player Card</a>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">‚óà OUTPUT FILES (43 CSVs)</div>
            <div class="panel-body">
                <table>
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Size</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>dim_player.csv</td><td>45 KB</td><td>Dimension</td></tr>
                        <tr><td>dim_team.csv</td><td>3 KB</td><td>Dimension</td></tr>
                        <tr><td>dim_schedule.csv</td><td>89 KB</td><td>Dimension</td></tr>
                        <tr><td>fact_events.csv</td><td>1.2 MB</td><td>Fact</td></tr>
                        <tr><td>fact_box_score.csv</td><td>156 KB</td><td>Fact</td></tr>
                        <tr><td>fact_shifts.csv</td><td>234 KB</td><td>Fact</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- NOTES TAB -->
    <div id="notes" class="tab-content">
        <h2 style="color: var(--accent-blue); margin-bottom: 20px;">‚óà NOTES & REQUEST LOG</h2>
        
        <div class="panel">
            <div class="panel-header">‚óà SAMPLE NOTES</div>
            <div class="panel-body">
                <div style="background: var(--bg-panel); padding: 15px; border-left: 3px solid var(--accent-blue); margin-bottom: 10px; border-radius: 4px;">
                    <div style="display: flex; justify-content: space-between;">
                        <strong style="color: var(--accent-blue);">[FEATURE REQUEST]</strong>
                        <span style="color: var(--text-secondary); font-size: 11px;">Dec 26, 2025</span>
                    </div>
                    <div style="margin-top: 5px;">Add xG model to shot chart visualization</div>
                </div>
                <div style="background: var(--bg-panel); padding: 15px; border-left: 3px solid var(--accent-orange); margin-bottom: 10px; border-radius: 4px;">
                    <div style="display: flex; justify-content: space-between;">
                        <strong style="color: var(--accent-orange);">[TODO]</strong>
                        <span style="color: var(--text-secondary); font-size: 11px;">Dec 26, 2025</span>
                    </div>
                    <div style="margin-top: 5px;">Connect tracker to BLB_Tables roster API</div>
                </div>
                <div style="background: var(--bg-panel); padding: 15px; border-left: 3px solid var(--accent-green); margin-bottom: 10px; border-radius: 4px;">
                    <div style="display: flex; justify-content: space-between;">
                        <strong style="color: var(--accent-green);">[IDEA]</strong>
                        <span style="color: var(--text-secondary); font-size: 11px;">Dec 26, 2025</span>
                    </div>
                    <div style="margin-top: 5px;">Create "Budget NHL Comparison" feature for player cards</div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
// Update time
document.getElementById('currentTime').textContent = new Date().toLocaleString();

// Tab switching
function showTab(tabId) {
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    
    document.querySelector(`.nav-item[onclick="showTab('${tabId}')"]`).classList.add('active');
    document.getElementById(tabId).classList.add('active');
}
</script>

</body>
</html>
