<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BenchSight - Outcome Dimensions</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #1e40af;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f3f4f6;
            --border: #e5e7eb;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--light); color: var(--dark); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 2rem; margin-bottom: 2rem; border-radius: 8px; }
        header h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        header p { opacity: 0.9; }
        .nav { margin-bottom: 2rem; }
        .nav a { color: var(--primary); text-decoration: none; margin-right: 1rem; }
        .nav a:hover { text-decoration: underline; }
        .card { background: white; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card h2 { color: var(--primary); margin-bottom: 1rem; border-bottom: 2px solid var(--border); padding-bottom: 0.5rem; }
        .card h3 { color: var(--secondary); margin: 1rem 0 0.5rem; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border); }
        th { background: var(--light); font-weight: 600; }
        tr:hover { background: #f9fafb; }
        code { background: #e5e7eb; padding: 0.125rem 0.375rem; border-radius: 3px; font-size: 0.875rem; }
        .tag { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-right: 0.25rem; }
        .tag-pk { background: #dbeafe; color: #1e40af; }
        .tag-yes { background: #dcfce7; color: #166534; }
        .tag-no { background: #fee2e2; color: #991b1b; }
        .formula-box { background: #eff6ff; border-left: 4px solid var(--primary); padding: 1rem; margin: 1rem 0; border-radius: 0 4px 4px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; }
    </style>
</head>
<body>
<div style="background:#f0f0f0;padding:10px;margin-bottom:20px;border-bottom:1px solid #ccc;">
<strong>Last Updated:</strong> January 7, 2026| <strong>Version:</strong> 12.03
</div>

<!-- ================================================================== -->
<!-- CHANGELOG - MUST BE UPDATED WITH EVERY MODIFICATION -->
<!-- ================================================================== -->
<!--
CHANGELOG:
---------------------------------------------------------------------------
2026-01-06 v8.0.5:
  - CRITICAL FIX: Restored 4 missing src/advanced/ modules:
    * create_additional_tables.py
    * enhance_all_stats.py
    * final_stats_enhancement.py
    * extended_tables.py
  - Created fact_events_player.csv (7,476 rows)
  - Extended tables now run: +15 tables created
  - Table count: 131 (54 dim, 73 fact, 3 QA, 1 other)
  - Added comprehensive code audit documentation
  - Fixed column name mismatches (Type -> event_type)

2026-01-06 v8.0.4:
  - CRITICAL: Recovered 72 missing tables from v7 backup
  - Table count restored from 53 to 130
  - Created 4 new outcome dimension tables
  - Regenerated ERD with all tables
  - Added table integrity tests

2026-01-05 v8.0.0:
  - Major schema expansion: 96 -> 111 tables planned
  - Added 317 player metrics
  - Created comprehensive foreign key relationships
  - Added QA validation tables

RULES FOR UPDATING THIS CHANGELOG:
1. ALWAYS add entry BEFORE making changes
2. Include: date, version, what changed, table counts
3. Never delete old entries
4. Be specific about what was added/changed/removed
---------------------------------------------------------------------------
-->

    <div class="container">
        <header>
            <h1>üìä Outcome Dimension Tables</h1>
            <p>BenchSight v13.18.3 - Event Outcome Classification</p>
        </header>

        <div class="nav">
            <a href="index.html">‚Üê Back to Documentation Hub</a>
            <a href="../index.html">Main Index</a>
            <a href="DATA_DICTIONARY.html">Data Dictionary</a>
        </div>

        <div class="card">
            <h2>Overview</h2>
            <p>Outcome dimensions classify the result of specific event types, enabling analytics on success rates, play quality, and event consequences.</p>
            
            <div class="formula-box">
                <strong>Pattern:</strong> Each outcome dimension maps <code>event_detail</code> values to standardized outcome categories with analytics flags.
            </div>

            <h3>New Tables (v8.0.3)</h3>
            <table>
                <tr><th>Table</th><th>Outcomes</th><th>FK Column</th><th>Applies To</th></tr>
                <tr><td>dim_shot_outcome</td><td>5</td><td>shot_outcome_id</td><td>Shot events</td></tr>
                <tr><td>dim_pass_outcome</td><td>4</td><td>pass_outcome_id</td><td>Pass events</td></tr>
                <tr><td>dim_save_outcome</td><td>3</td><td>save_outcome_id</td><td>Save events</td></tr>
                <tr><td>dim_zone_outcome</td><td>6</td><td>zone_outcome_id</td><td>Zone_Entry_Exit events</td></tr>
            </table>
        </div>

        <div class="card">
            <h2>üèí dim_shot_outcome</h2>
            <p>Classifies shot results for Corsi/Fenwick/SOG calculations.</p>
            
            <table>
                <tr>
                    <th>shot_outcome_id</th>
                    <th>shot_outcome_code</th>
                    <th>counts_as_sog</th>
                    <th>counts_as_corsi</th>
                    <th>counts_as_fenwick</th>
                    <th>event_details</th>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SO01</span></td>
                    <td>goal</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Goal_Scored, Shot_Goal</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SO02</span></td>
                    <td>saved</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Shot_OnNetSaved, Shot_OnNet</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SO03</span></td>
                    <td>blocked</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Shot_Blocked, Shot_BlockedSameTeam</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SO04</span></td>
                    <td>missed</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Shot_Missed, Shot_MissedPost</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SO05</span></td>
                    <td>deflected</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Shot_Deflected</td>
                </tr>
            </table>

            <div class="formula-box">
                <strong>Key Formulas:</strong><br>
                ‚Ä¢ <strong>Corsi</strong> = All shot attempts (SOG + Blocked + Missed + Deflected)<br>
                ‚Ä¢ <strong>Fenwick</strong> = Unblocked shot attempts (SOG + Missed + Deflected)<br>
                ‚Ä¢ <strong>SOG</strong> = Shots reaching goalie (Saved + Goals)
            </div>
        </div>

        <div class="card">
            <h2>üéØ dim_pass_outcome</h2>
            <p>Classifies pass completion and turnover risk.</p>
            
            <table>
                <tr>
                    <th>pass_outcome_id</th>
                    <th>pass_outcome_code</th>
                    <th>is_successful</th>
                    <th>turnover_risk</th>
                    <th>event_details</th>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">PO01</span></td>
                    <td>completed</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Pass_Completed</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">PO02</span></td>
                    <td>missed</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Pass_Missed</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">PO03</span></td>
                    <td>deflected</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Pass_Deflected</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">PO04</span></td>
                    <td>intercepted</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Pass_Intercepted</td>
                </tr>
            </table>

            <div class="formula-box">
                <strong>Pass Completion %</strong> = COUNT(pass_outcome_id = 'PO01') / COUNT(pass events) √ó 100
            </div>
        </div>

        <div class="card">
            <h2>ü•Ö dim_save_outcome</h2>
            <p>Classifies save results for rebound danger analysis.</p>
            
            <table>
                <tr>
                    <th>save_outcome_id</th>
                    <th>save_outcome_code</th>
                    <th>puck_control</th>
                    <th>rebound_danger</th>
                    <th>event_details</th>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SV01</span></td>
                    <td>rebound</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Save_Rebound</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SV02</span></td>
                    <td>freeze</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Save_Freeze</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">SV03</span></td>
                    <td>played</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Save_Played</td>
                </tr>
            </table>

            <div class="formula-box">
                <strong>Rebound Control %</strong> = COUNT(puck_control = 1) / COUNT(saves) √ó 100
            </div>
        </div>

        <div class="card">
            <h2>üö™ dim_zone_outcome</h2>
            <p>Classifies zone transition success/failure.</p>
            
            <table>
                <tr>
                    <th>zone_outcome_id</th>
                    <th>zone_outcome_code</th>
                    <th>zone_action</th>
                    <th>is_successful</th>
                    <th>event_details</th>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO01</span></td>
                    <td>entry_success</td>
                    <td>entry</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Zone_Entry</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO02</span></td>
                    <td>entry_failed</td>
                    <td>entry</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Zone_Entryfailed</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO03</span></td>
                    <td>exit_success</td>
                    <td>exit</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Zone_Exit</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO04</span></td>
                    <td>exit_failed</td>
                    <td>exit</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Zone_ExitFailed</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO05</span></td>
                    <td>keepin_success</td>
                    <td>keepin</td>
                    <td><span class="tag tag-yes">1</span></td>
                    <td>Zone_Keepin</td>
                </tr>
                <tr>
                    <td><span class="tag tag-pk">ZO06</span></td>
                    <td>keepin_failed</td>
                    <td>keepin</td>
                    <td><span class="tag tag-no">0</span></td>
                    <td>Zone_KeepinFailed</td>
                </tr>
            </table>

            <div class="formula-box">
                <strong>Zone Entry %</strong> = COUNT(zone_action='entry' AND is_successful=1) / COUNT(zone_action='entry') √ó 100<br>
                <strong>Breakout %</strong> = COUNT(zone_action='exit' AND is_successful=1) / COUNT(zone_action='exit') √ó 100
            </div>
        </div>

        <div class="card">
            <h2>üîó FK Mapping in fact_events</h2>
            <p>Each outcome dimension has a corresponding FK column in <code>fact_events</code>:</p>
            
            <table>
                <tr><th>Column</th><th>Fill Rate</th><th>Mapped From</th></tr>
                <tr><td>shot_outcome_id</td><td>8% (455/5831)</td><td>Shot events only</td></tr>
                <tr><td>pass_outcome_id</td><td>18% (1021/5831)</td><td>Pass events only</td></tr>
                <tr><td>save_outcome_id</td><td>4% (211/5831)</td><td>Save events only</td></tr>
                <tr><td>zone_outcome_id</td><td>19% (1128/5831)</td><td>Zone_Entry_Exit events only</td></tr>
            </table>

            <p>Fill rates are low because these FKs only apply to their respective event types.</p>
        </div>

        <footer style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border); text-align: center; color: #6b7280;">
            <p>BenchSight Hockey Analytics Platform ‚Ä¢ v13.18.3 ‚Ä¢ Generated January 2026</p>
        </footer>
    </div>
</body>
</html>
