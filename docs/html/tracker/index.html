<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BenchSight Tracker & Supabase Documentation</title>
<style>
:root {
  --bg: #0d1117;
  --surface: #161b22;
  --border: #30363d;
  --text: #c9d1d9;
  --muted: #8b949e;
  --accent: #58a6ff;
  --accent2: #3fb950;
  --warn: #d29922;
  --danger: #f85149;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  font-size: 14px;
}
.container { max-width: 1100px; margin: 0 auto; padding: 20px 40px; }
header {
  background: linear-gradient(135deg, #1a1f2e 0%, #0d1117 100%);
  border-bottom: 1px solid var(--border);
  padding: 30px 0;
  text-align: center;
}
header h1 {
  font-size: 32px;
  background: linear-gradient(135deg, #00d4aa 0%, #00b4d8 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}
header p { color: var(--muted); font-size: 16px; }
nav {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 10px 0;
  position: sticky;
  top: 0;
  z-index: 100;
}
nav .container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
nav a {
  color: var(--muted);
  text-decoration: none;
  padding: 5px 12px;
  border-radius: 4px;
  font-size: 13px;
}
nav a:hover { color: var(--accent); background: rgba(88,166,255,0.1); }
nav a.active { color: var(--accent); background: rgba(88,166,255,0.15); }
main { padding: 30px 0; }
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin: 30px 0; }
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 20px;
  transition: border-color 0.2s;
}
.card:hover { border-color: var(--accent); }
.card h3 {
  color: var(--accent);
  font-size: 16px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.card p { color: var(--muted); font-size: 13px; margin-bottom: 12px; }
.card .links { display: flex; flex-wrap: wrap; gap: 8px; }
.card .links a {
  font-size: 12px;
  color: var(--text);
  background: var(--bg);
  padding: 4px 10px;
  border-radius: 4px;
  text-decoration: none;
  border: 1px solid var(--border);
}
.card .links a:hover { border-color: var(--accent); color: var(--accent); }
.badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
}
.badge.done { background: var(--accent2); color: #000; }
.badge.pending { background: var(--warn); color: #000; }
.badge.critical { background: var(--danger); color: #fff; }
h2 {
  color: var(--text);
  font-size: 20px;
  margin: 30px 0 15px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
}
table {
  width: 100%;
  border-collapse: collapse;
  margin: 15px 0;
  font-size: 13px;
}
th, td {
  border: 1px solid var(--border);
  padding: 10px 12px;
  text-align: left;
}
th { background: var(--surface); color: var(--accent); }
tr:nth-child(even) { background: rgba(255,255,255,0.02); }
code {
  font-family: 'SF Mono', Consolas, monospace;
  background: var(--bg);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  border: 1px solid var(--border);
}
pre {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 15px;
  overflow-x: auto;
  font-size: 12px;
}
.highlight { background: rgba(88,166,255,0.1); border-left: 3px solid var(--accent); padding: 15px; margin: 15px 0; border-radius: 0 6px 6px 0; }
.warning { background: rgba(210,153,34,0.1); border-left: 3px solid var(--warn); padding: 15px; margin: 15px 0; border-radius: 0 6px 6px 0; }
footer {
  border-top: 1px solid var(--border);
  padding: 20px 0;
  margin-top: 40px;
  text-align: center;
  color: var(--muted);
  font-size: 12px;
}
</style>
</head>
<body>

<header>
  <div class="container">
    <h1>‚ö° BenchSight Tracker & Supabase</h1>
    <p>Complete documentation for the hockey event tracking system</p>
    <p style="margin-top:10px;"><span class="badge done">v3.0</span> <span style="color:var(--muted);">January 7, 2026</span></p>
  </div>
</header>

<nav>
  <div class="container">
    <a href="../index.html">üìä Main Docs</a>
    <a href="benchsight_tracker_v3.html" class="active">üéÆ Launch Tracker</a>
    <a href="#setup">‚öôÔ∏è Setup Guide</a>
    <a href="#etl">üìã ETL Format</a>
    <a href="#features">‚ú® Features</a>
    <a href="#workflow">üîÑ Workflow</a>
  </div>
</nav>

<main>
<div class="container">

<div class="highlight">
  <strong>üöÄ Quick Start:</strong> 
  <a href="benchsight_tracker_v3.html" style="color:var(--accent);">Launch Tracker</a> ‚Üí 
  Works offline with demo data. For full features, set up Supabase first.
</div>

<h2>üìö Documentation Index</h2>

<div class="grid">
  <div class="card">
    <h3>üéÆ Tracker Application</h3>
    <p>The main event tracking interface. Single HTML file, works offline.</p>
    <div class="links">
      <a href="benchsight_tracker_v3.html">Launch Tracker v3</a>
    </div>
  </div>

  <div class="card">
    <h3>‚öôÔ∏è Supabase Setup</h3>
    <p>How to set up the cloud database for full functionality.</p>
    <div class="links">
      <a href="SUPABASE_SETUP_GUIDE.html">Setup Guide</a>
      <a href="../../sql/setup_supabase.sql">SQL Schema</a>
    </div>
  </div>

  <div class="card">
    <h3>üìã ETL Specification</h3>
    <p>EXACT export format the ETL expects. Critical for data compatibility.</p>
    <div class="links">
      <a href="TRACKER_ETL_SPECIFICATION.html">ETL Spec</a>
    </div>
  </div>

  <div class="card">
    <h3>üìñ Requirements</h3>
    <p>Complete feature requirements and implementation details.</p>
    <div class="links">
      <a href="TRACKER_REQUIREMENTS.html">Requirements v2</a>
      <a href="TRACKER_V3_SPECIFICATION.html">V3 Spec</a>
    </div>
  </div>

  <div class="card">
    <h3>ü§ñ Developer Handoff</h3>
    <p>Continue development in a new chat session.</p>
    <div class="links">
      <a href="TRACKER_DEVELOPER_HANDOFF.html">Handoff Guide</a>
    </div>
  </div>

  <div class="card">
    <h3>üìä Data Analysis</h3>
    <p>ML analysis of existing tracking data patterns.</p>
    <div class="links">
      <a href="TRACKING_TEMPLATE_ANALYSIS.html">Analysis</a>
    </div>
  </div>
</div>

<h2 id="setup">‚öôÔ∏è Supabase Setup Overview</h2>

<div class="warning">
  <strong>‚ö†Ô∏è Action Required:</strong> Supabase must be set up before the tracker can pull real game data.
  The tracker works offline with demo data, but for production use you need to:
</div>

<h3>Setup Steps</h3>
<ol style="margin-left:20px;color:var(--muted);">
  <li>Create a free Supabase account at <a href="https://supabase.com" style="color:var(--accent);">supabase.com</a></li>
  <li>Create a new project</li>
  <li>Run the SQL schema from <code>sql/setup_supabase.sql</code></li>
  <li>Copy your Project URL and anon key</li>
  <li>Enter credentials in Tracker Settings</li>
</ol>

<h3>Required Tables</h3>
<table>
  <tr><th>Table</th><th>Purpose</th><th>Tracker Action</th></tr>
  <tr><td>dim_games</td><td>Game list with teams</td><td>READ</td></tr>
  <tr><td>dim_game_rosters</td><td>Players per game</td><td>READ</td></tr>
  <tr><td>dim_event_types</td><td>Event type dropdown</td><td>READ</td></tr>
  <tr><td>dim_event_details</td><td>Cascading detail dropdowns</td><td>READ</td></tr>
  <tr><td>fact_norad_goals</td><td>Official goals for validation</td><td>READ</td></tr>
  <tr><td>stage_tracker_events</td><td>Events before ETL</td><td>WRITE</td></tr>
  <tr><td>stage_tracker_shifts</td><td>Shifts before ETL</td><td>WRITE</td></tr>
</table>

<h2 id="etl">üìã ETL Export Format</h2>

<div class="highlight">
  <strong>Critical:</strong> The tracker exports data in a specific format that the ETL expects.
  Getting this wrong will break data processing.
</div>

<h3>Events Tab: LONG FORMAT</h3>
<p>One row PER PLAYER PER EVENT. If an event has 3 players, it generates 3 rows.</p>
<pre>
event_index=1002 with 3 players:
  Row 1: player_role=event_team_player_1, player_game_number=42
  Row 2: player_role=event_team_player_2, player_game_number=14
  Row 3: player_role=opp_team_player_1, player_game_number=30
</pre>

<h3>Shifts Tab: WIDE FORMAT</h3>
<p>One row PER SHIFT with all players in columns.</p>
<pre>
shift_index, Period, shift_start_min, shift_start_sec, ..., home_forward_1, home_forward_2, ...
1, 1, 18, 0, ..., 70, 75, ...
</pre>

<h3>XY Data: Separate Sheet or CSV</h3>
<pre>
game_id, link_event_index, Player, X, Y, X2, Y2, ... X10, Y10
18977, 1002, 42, -45.2, 12.3, -42.1, 15.6, ...
18977, 1002, puck, -50.0, 10.0, -45.0, 12.0, ...
</pre>

<h2 id="features">‚ú® Features Implemented</h2>

<table>
  <tr><th>Feature</th><th>Status</th><th>Notes</th></tr>
  <tr><td>Event type selection</td><td><span class="badge done">Done</span></td><td>12 main event types with hotkeys</td></tr>
  <tr><td>Cascading dropdowns</td><td><span class="badge done">Done</span></td><td>Type ‚Üí Detail 1 ‚Üí Detail 2</td></tr>
  <tr><td>XY coordinate tracking</td><td><span class="badge done">Done</span></td><td>Up to 10 points per player/puck</td></tr>
  <tr><td>Play details per player</td><td><span class="badge done">Done</span></td><td>s/u, offensive/defensive plays</td></tr>
  <tr><td>Auto zone from XY</td><td><span class="badge done">Done</span></td><td>Based on event_player_1 position</td></tr>
  <tr><td>Time auto-fill</td><td><span class="badge done">Done</span></td><td>New event start = last event end</td></tr>
  <tr><td>Shift tracking</td><td><span class="badge done">Done</span></td><td>Full lineup, start/stop types</td></tr>
  <tr><td>Intermission handling</td><td><span class="badge done">Done</span></td><td>With duration for video sync</td></tr>
  <tr><td>Event/Shift editing</td><td><span class="badge done">Done</span></td><td>Click to edit all fields</td></tr>
  <tr><td>Excel export</td><td><span class="badge done">Done</span></td><td>LONG format for events</td></tr>
  <tr><td>Supabase integration</td><td><span class="badge pending">Needs Setup</span></td><td>Works offline with demo data</td></tr>
  <tr><td>NORAD validation</td><td><span class="badge pending">Needs Supabase</span></td><td>Compare vs official goals</td></tr>
  <tr><td>Video integration</td><td><span class="badge pending">Future</span></td><td>YouTube embed planned</td></tr>
</table>

<h2 id="workflow">üîÑ Recommended Workflow</h2>

<h3>1. Setup (One Time)</h3>
<pre>
1. Create Supabase account
2. Run SQL schema
3. Upload dim tables from BLB_Tables.xlsx
4. Upload game rosters
5. Upload NORAD goals for validation
</pre>

<h3>2. Track a Game</h3>
<pre>
1. Open tracker in browser
2. Enter Supabase credentials in Settings
3. Select game from dropdown
4. Track events and shifts as game plays
5. Use XY clicks for positions
6. Export to Excel when done
</pre>

<h3>3. Process Data</h3>
<pre>
1. Place exported Excel in data/raw/games/{game_id}/
2. Run: python -m src.etl_orchestrator full
3. Verify: python scripts/pre_delivery.py
4. Check goal counts match NORAD
</pre>

<h2>‚å®Ô∏è Keyboard Shortcuts</h2>

<table>
  <tr><th>Key</th><th>Action</th><th>Key</th><th>Action</th></tr>
  <tr><td><code>S</code></td><td>Shot</td><td><code>P</code></td><td>Pass</td></tr>
  <tr><td><code>F</code></td><td>Faceoff</td><td><code>G</code></td><td>Goal</td></tr>
  <tr><td><code>T</code></td><td>Turnover</td><td><code>Z</code></td><td>Zone</td></tr>
  <tr><td><code>V</code></td><td>Save</td><td><code>R</code></td><td>Rebound</td></tr>
  <tr><td><code>D</code></td><td>DeadIce</td><td><code>X</code></td><td>Stoppage</td></tr>
  <tr><td><code>N</code></td><td>Penalty</td><td><code>O</code></td><td>Possession</td></tr>
  <tr><td><code>H</code></td><td>Home team</td><td><code>A</code></td><td>Away team</td></tr>
  <tr><td><code>Enter</code></td><td>Log event</td><td><code>Esc</code></td><td>Clear</td></tr>
  <tr><td><code>Shift+S</code></td><td>Log shift</td><td><code>Ctrl+Z</code></td><td>Undo</td></tr>
</table>

<h2>üîß Critical Rules</h2>

<div class="warning">
<strong>Goal Counting Rule (MEMORIZE):</strong>
<pre>
# CORRECT - Goals are ONLY:
event_type = 'Goal' AND event_detail = 'Goal_Scored'

# WRONG - Shot_Goal is the SHOT, not the goal:
event_detail = 'Shot_Goal'  ‚Üê THIS IS WRONG
</pre>
</div>

</div>
</main>

<footer>
  <div class="container">
    BenchSight Tracker Documentation ‚Ä¢ v3.0 ‚Ä¢ January 7, 2026
  </div>
</footer>

</body>
</html>
