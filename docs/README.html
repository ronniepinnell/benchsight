<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<title>README</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; max-width: 900px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }
h1, h2, h3 { color: #1a1a2e; }
h1 { border-bottom: 2px solid #e94560; padding-bottom: 10px; }
h2 { border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 30px; }
code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-size: 0.9em; }
pre { background: #1a1a2e; color: #e0e0e0; padding: 15px; border-radius: 5px; overflow-x: auto; }
pre code { background: transparent; color: inherit; }
table { border-collapse: collapse; width: 100%; margin: 20px 0; }
th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
th { background: #f4f4f4; }
a { color: #e94560; }
blockquote { border-left: 4px solid #e94560; margin: 20px 0; padding-left: 20px; color: #666; }
ul, ol { padding-left: 25px; }
li { margin: 5px 0; }
</style>
</head><body><h1>BenchSight Platform - Complete Documentation</h1>
<h2>ğŸ¯ Project Overview</h2>
<p>BenchSight is a comprehensive hockey analytics platform for the NORAD recreational hockey league. The system processes game tracking data through ETL pipelines into a 111-table dimensional data warehouse hosted on Supabase PostgreSQL.</p>
<p><strong>Goal:</strong> Reduce manual game tracking time from 8 hours to 1-2 hours per game.</p>
<hr />
<h2>ğŸ“¦ Project Structure</h2>
<pre><code>benchsight_restored/
â”œâ”€â”€ tracker/                    # Game Tracking Interface
â”‚   â”œâ”€â”€ tracker_v22.html       # Production tracker (LATEST)
â”‚   â””â”€â”€ tracker_v21.html       # Previous version
â”œâ”€â”€ dashboard/                  # Analytics Dashboards
â”‚   â”œâ”€â”€ dashboard_v4.html      # NHL-style dashboard (LATEST)
â”‚   â”œâ”€â”€ dashboard.html         # Original dashboard
â”‚   â””â”€â”€ app.py                 # Dash/Plotly server
â”œâ”€â”€ scripts/                    # ETL &amp; Utilities
â”‚   â”œâ”€â”€ tracker_api.py         # Backend API for tracker
â”‚   â”œâ”€â”€ flexible_loader.py     # Supabase data loader
â”‚   â”œâ”€â”€ bulletproof_loader.py  # Robust CSV loader
â”‚   â””â”€â”€ qa_comprehensive.py    # Data validation
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                   # Source tracking files
â”‚   â””â”€â”€ output/                # Generated CSVs (111 tables)
â”œâ”€â”€ config/                    # Configuration
â”‚   â”œâ”€â”€ config.yaml           # Main config
â”‚   â””â”€â”€ supabase_credentials.yaml
â”œâ”€â”€ docs/                      # Documentation
â”‚   â””â”€â”€ handoffs/             # Developer handoffs
â””â”€â”€ src/                       # Core modules
    â””â”€â”€ database/             # DB operations
</code></pre>
<hr />
<h2>ğŸ’ Tracker v22 Features</h2>
<h3>Core Functionality</h3>
<ul>
<li><strong>12 Event Types:</strong> Faceoff, Shot, Goal, Save, Pass, Turnover, Zone Entry, Zone Exit, Hit, Block, Retrieval, Stoppage</li>
<li><strong>Keyboard Shortcuts:</strong> F, S, G, V, P, T, Z, X, H, B, R, W + Space (success), Enter (save)</li>
<li><strong>6+6 Player Slots:</strong> 6 event team players + 6 opponent players per event</li>
<li><strong>Auto-Linking:</strong> Shot â†’ Save chains automatically linked</li>
</ul>
<h3>XY Tracking (NEW)</h3>
<ul>
<li><strong>Puck Tracking:</strong> Up to 10 XY points per event with trail visualization</li>
<li><strong>Player Tracking:</strong> Track player positions on rink</li>
<li><strong>Shot Target:</strong> 6-zone net location picker (GH, TM, BH, GL, 5H, BL)</li>
<li><strong>Auto Zone Detection:</strong> Zone determined from puck X position</li>
</ul>
<h3>Supabase Integration</h3>
<ul>
<li><strong>Pull:</strong> Load games, rosters, videos, existing tracking data</li>
<li><strong>Push:</strong> Save events, shifts, puck XY, player XY, shot XY</li>
<li><strong>Tables Written:</strong></li>
<li><code>fact_events</code> - Core event data</li>
<li><code>fact_events_player</code> - Player involvement</li>
<li><code>fact_shifts</code> - Shift tracking</li>
<li><code>fact_puck_xy_long</code> - Puck positions (long format)</li>
<li><code>fact_puck_xy_wide</code> - Puck positions (wide format)</li>
<li><code>fact_player_xy_long</code> - Player positions</li>
<li><code>fact_shot_xy</code> - Shot locations with net targets</li>
</ul>
<h3>Workflow Features</h3>
<ul>
<li><strong>Undo/Redo:</strong> Ctrl+Z / Ctrl+Y with 50-step history</li>
<li><strong>Import/Export:</strong> Excel file support (.xlsx)</li>
<li><strong>Local Save:</strong> Auto-save to localStorage</li>
<li><strong>Video Sync:</strong> YouTube embed with time sync</li>
<li><strong>Edit Mode:</strong> Load and modify existing events</li>
</ul>
<hr />
<h2>ğŸ“Š Dashboard v4 Features</h2>
<h3>Views</h3>
<ol>
<li><strong>Overview</strong> - Score header, team comparison bars, timeline, top performers</li>
<li><strong>Box Score</strong> - Full player stats table with sorting</li>
<li><strong>Shot Chart</strong> - Interactive rink with shot locations, filtering</li>
<li><strong>Players</strong> - Player cards with stats, filterable by team/position</li>
<li><strong>Advanced</strong> - Corsi, Fenwick, event breakdown</li>
<li><strong>H2H</strong> - Head-to-head player comparison</li>
</ol>
<h3>Inspired By</h3>
<ul>
<li>Natural Stat Trick (naturalstattrick.com)</li>
<li>Evolving Hockey (evolving-hockey.com)</li>
<li>Money Puck (moneypuck.com)</li>
<li>Hockey Reference (hockey-reference.com)</li>
</ul>
<hr />
<h2>ğŸ”§ Backend API (tracker_api.py)</h2>
<h3>CLI Usage</h3>
<pre><code class="language-bash"># List games
python scripts/tracker_api.py --action list-games

# Get game data
python scripts/tracker_api.py --action get-game --game-id 18969

# Save tracking data
python scripts/tracker_api.py --action save-tracking --game-id 18969 --file tracking.json

# Export to CSV
python scripts/tracker_api.py --action export-csv --game-id 18969

# Run ETL
python scripts/tracker_api.py --action run-etl --game-id 18969

# Start HTTP API server
python scripts/tracker_api.py --action serve --port 8765
</code></pre>
<h3>HTTP Endpoints</h3>
<ul>
<li><code>GET /api/games</code> - List available games</li>
<li><code>GET /api/game?id=XXXXX</code> - Get game with tracking data</li>
<li><code>GET /api/players</code> - Get all players</li>
<li><code>GET /api/play-details</code> - Get play detail options</li>
<li><code>POST /api/save</code> - Save tracking data</li>
<li><code>POST /api/etl</code> - Trigger ETL pipeline</li>
</ul>
<h3>Library Usage</h3>
<pre><code class="language-python">from scripts.tracker_api import TrackerAPI

api = TrackerAPI()
games = api.list_games()
game_data = api.get_game('18969')
api.save_events('18969', events, replace=True)
api.save_puck_xy('18969', puck_data)
api.trigger_etl('18969')
</code></pre>
<hr />
<h2>ğŸ“ˆ Data Model</h2>
<h3>Dimension Tables (44)</h3>
<ul>
<li><code>dim_player</code> - Player master data</li>
<li><code>dim_schedule</code> - Game schedule</li>
<li><code>dim_team</code> - Team information</li>
<li><code>dim_event_type</code> - Event type definitions</li>
<li><code>dim_play_detail</code> - Micro-play actions</li>
<li><code>dim_net_location</code> - Shot target zones</li>
<li><code>dim_rink_coord</code> - Rink coordinate grid</li>
<li>... and 37 more</li>
</ul>
<h3>Fact Tables (67)</h3>
<ul>
<li><code>fact_events</code> - Core event tracking</li>
<li><code>fact_events_player</code> - Player-event relationships</li>
<li><code>fact_shifts</code> - Shift tracking</li>
<li><code>fact_puck_xy_long/wide</code> - Puck position tracking</li>
<li><code>fact_player_xy_long/wide</code> - Player position tracking</li>
<li><code>fact_shot_xy</code> - Shot location with targets</li>
<li><code>fact_player_game_stats</code> - Aggregated player stats</li>
<li><code>fact_team_game_stats</code> - Team-level stats</li>
<li><code>fact_h2h</code> - Head-to-head matchups</li>
<li><code>fact_wowy</code> - With/without analysis</li>
<li>... and 57 more</li>
</ul>
<h3>Key Relationships</h3>
<pre><code>dim_schedule (game_id) 
  â†’ fact_gameroster (player_id â†’ dim_player)
  â†’ fact_events (event_index)
    â†’ fact_events_player (player_id)
    â†’ fact_puck_xy_long (point tracking)
    â†’ fact_shot_xy (shot details)
  â†’ fact_shifts (shift_index)
  â†’ fact_video (camera feeds)
</code></pre>
<hr />
<h2>ğŸš€ Deployment</h2>
<h3>Supabase Setup</h3>
<pre><code class="language-yaml">URL: https://uuaowslhpgyiudmbvqze.supabase.co
Key: Service role key in config
Tables: 111 tables created via SQL migrations
</code></pre>
<h3>Local Development</h3>
<pre><code class="language-bash"># Install dependencies
pip install supabase pandas xlsxwriter openpyxl --break-system-packages

# Run tracker
open tracker/tracker_v22.html

# Run dashboard
open dashboard/dashboard_v4.html

# Run API server
python scripts/tracker_api.py --action serve
</code></pre>
<hr />
<h2>âœ… Current Status</h2>
<h3>COMPLETED</h3>
<ul>
<li>[x] Tracker v22 with full Supabase integration</li>
<li>[x] Puck XY tracking (10 points per event)</li>
<li>[x] Player XY tracking</li>
<li>[x] Shot XY with net location</li>
<li>[x] Undo/redo functionality</li>
<li>[x] Import/export Excel</li>
<li>[x] Dashboard v4 with 6 views</li>
<li>[x] Backend API (tracker_api.py)</li>
<li>[x] 111-table data model</li>
</ul>
<h3>IN PROGRESS</h3>
<ul>
<li>[ ] Full ETL pipeline restoration</li>
<li>[ ] Real-time stat calculations</li>
<li>[ ] Video timestamp linking</li>
</ul>
<h3>PLANNED</h3>
<ul>
<li>[ ] Mobile responsive tracker</li>
<li>[ ] Real-time collaboration</li>
<li>[ ] Advanced analytics (xG, WAR)</li>
<li>[ ] Season-level dashboards</li>
<li>[ ] Player comparison tools</li>
</ul>
<hr />
<h2>ğŸ“‹ Gameplan - Next Steps</h2>
<h3>Phase 1: Data Validation (Priority)</h3>
<ol>
<li>Test tracker with game 18969</li>
<li>Verify Supabase push/pull</li>
<li>Validate XY data storage</li>
<li>Compare results to noradhockey.com</li>
</ol>
<h3>Phase 2: ETL Completion</h3>
<ol>
<li>Restore all 111 table transformations</li>
<li>Add stat aggregation pipelines</li>
<li>Implement QA validation suite</li>
<li>Test with multiple games</li>
</ol>
<h3>Phase 3: Dashboard Enhancement</h3>
<ol>
<li>Add player radar charts</li>
<li>Implement line combination tool</li>
<li>Add expected goals (xG) model</li>
<li>Create season overview page</li>
</ol>
<h3>Phase 4: Production Polish</h3>
<ol>
<li>Error handling improvements</li>
<li>Performance optimization</li>
<li>Mobile responsiveness</li>
<li>User documentation</li>
</ol>
<hr />
<h2>ğŸ”‘ Key Files</h2>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tracker/tracker_v22.html</code></td>
<td>Production game tracker</td>
</tr>
<tr>
<td><code>dashboard/dashboard_v4.html</code></td>
<td>Analytics dashboard</td>
</tr>
<tr>
<td><code>scripts/tracker_api.py</code></td>
<td>Backend API</td>
</tr>
<tr>
<td><code>scripts/flexible_loader.py</code></td>
<td>Supabase data loader</td>
</tr>
<tr>
<td><code>config/config.yaml</code></td>
<td>Configuration</td>
</tr>
<tr>
<td><code>data/output/*.csv</code></td>
<td>Generated fact/dim tables</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸ“ Support</h2>
<p>For questions about:
- <strong>Tracker:</strong> Check keyboard shortcuts in footer
- <strong>Dashboard:</strong> Use filters and tabs to navigate
- <strong>API:</strong> Run <code>python scripts/tracker_api.py --help</code>
- <strong>Data:</strong> Check <code>docs/DATA_DICTIONARY.md</code></p>
<hr />
<p><em>Last Updated: January 2026</em>
<em>Version: v22</em></p></body></html>