flowchart TB
    subgraph RINK["üèí HOCKEY RINK - XY COORDINATE SYSTEM"]
        direction LR
        
        subgraph DZ["DEFENSIVE ZONE<br/>x: -100 to -25"]
            DZ_SLOT["DZ Slot<br/>DANGER: HIGH"]
            DZ_POINT["DZ Point<br/>DANGER: LOW"]
            DZ_CORNER["DZ Corners<br/>DANGER: LOW"]
        end
        
        subgraph NZ["NEUTRAL ZONE<br/>x: -25 to 25"]
            NZ_CENTER["NZ Center<br/>DANGER: LOW"]
            NZ_BOARDS["NZ Boards<br/>DANGER: LOW"]
        end
        
        subgraph OZ["OFFENSIVE ZONE<br/>x: 25 to 100"]
            OZ_SLOT["OZ Slot<br/>x: 69-89, y: -8.5 to 8.5<br/>DANGER: HIGH ‚≠ê"]
            OZ_CIRCLE["OZ Circles<br/>DANGER: MID"]
            OZ_POINT["OZ Point<br/>x: 25-54<br/>DANGER: LOW"]
            OZ_CORNER["OZ Corners<br/>DANGER: LOW"]
            OZ_BEHIND["Behind Net<br/>x: 89-100<br/>DANGER: LOW"]
        end
    end
    
    subgraph DIMS["üì¶ DIMENSION TABLES"]
        direction TB
        
        DIM1["dim_rinkcoordzones<br/>84 zones<br/>Most detailed"]
        DIM2["dim_rinkboxcoord<br/>24 boxes<br/>Medium detail"]
        DIM3["dim_rink_coord<br/>12 zones<br/>Simple"]
    end
    
    subgraph USAGE["üîß USAGE"]
        direction TB
        
        CODE["```sql
SELECT z.danger, z.zone, z.side
FROM fact_shot_xy s
JOIN dim_rinkcoordzones z
  ON s.shot_x BETWEEN z.x_min AND z.x_max
 AND s.shot_y BETWEEN z.y_min AND z.y_max
```"]
    end
    
    OZ_SLOT --> |"Maps to"| DIM1
    DIM1 --> |"Returns"| CODE

    %% Styling
    classDef high fill:#ffcdd2,stroke:#c62828
    classDef mid fill:#fff9c4,stroke:#f9a825
    classDef low fill:#c8e6c9,stroke:#2e7d32
    classDef dim fill:#e1bee7,stroke:#7b1fa2
    
    class OZ_SLOT,DZ_SLOT high
    class OZ_CIRCLE mid
    class OZ_POINT,OZ_CORNER,OZ_BEHIND,NZ_CENTER,NZ_BOARDS,DZ_POINT,DZ_CORNER low
    class DIM1,DIM2,DIM3 dim
