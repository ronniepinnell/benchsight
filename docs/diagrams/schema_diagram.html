<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BenchSight Database Schema</title>
<style>
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #0a0a0f; 
    color: #e0e0e0; 
    padding: 40px;
    margin: 0;
}
h1 { color: #00d4ff; text-align: center; }
.diagram-container {
    max-width: 1400px;
    margin: 0 auto;
    background: #1a1a24;
    border-radius: 12px;
    padding: 30px;
    border: 1px solid #2a2a3a;
    overflow-x: auto;
}
svg { max-width: 100%; height: auto; }
.caption { text-align: center; color: #888; margin-top: 20px; font-size: 14px; }
.legend { margin-top: 30px; display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; }
.legend-item { display: flex; align-items: center; gap: 8px; }
.legend-box { width: 20px; height: 20px; border-radius: 4px; }
</style>
</head>
<body>

<h1>BenchSight Database Schema (Star Schema)</h1>

<div class="diagram-container">
<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 6 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" fill="#00d4ff" font-size="16" font-weight="bold">STAR SCHEMA - hockey_mart</text>

  <!-- ========== DIMENSION TABLES ========== -->
  
  <!-- dim_player -->
  <rect x="30" y="60" width="200" height="180" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="60" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="80" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_player</text>
  <text x="40" y="102" fill="#00ff88" font-size="10">PK player_id</text>
  <text x="40" y="118" fill="#888" font-size="10">player_full_name</text>
  <text x="40" y="134" fill="#888" font-size="10">display_name</text>
  <text x="40" y="150" fill="#888" font-size="10">primary_position</text>
  <text x="40" y="166" fill="#888" font-size="10">skill_rating</text>
  <text x="40" y="182" fill="#888" font-size="10">player_hand</text>
  <text x="40" y="198" fill="#888" font-size="10">birth_year</text>
  <text x="40" y="214" fill="#666" font-size="9">335 rows</text>

  <!-- dim_team -->
  <rect x="30" y="270" width="200" height="150" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="270" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="290" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_team</text>
  <text x="40" y="312" fill="#00ff88" font-size="10">PK team_id</text>
  <text x="40" y="328" fill="#888" font-size="10">team_name</text>
  <text x="40" y="344" fill="#888" font-size="10">team_cd</text>
  <text x="40" y="360" fill="#888" font-size="10">team_color1</text>
  <text x="40" y="376" fill="#888" font-size="10">league</text>
  <text x="40" y="392" fill="#666" font-size="9">26 rows</text>

  <!-- dim_schedule -->
  <rect x="30" y="450" width="200" height="180" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="450" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="470" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_schedule</text>
  <text x="40" y="492" fill="#00ff88" font-size="10">PK game_id</text>
  <text x="40" y="508" fill="#888" font-size="10">game_date</text>
  <text x="40" y="524" fill="#888" font-size="10">home_team_name</text>
  <text x="40" y="540" fill="#888" font-size="10">away_team_name</text>
  <text x="40" y="556" fill="#888" font-size="10">home_total_goals</text>
  <text x="40" y="572" fill="#888" font-size="10">away_total_goals</text>
  <text x="40" y="588" fill="#888" font-size="10">video_url</text>
  <text x="40" y="604" fill="#666" font-size="9">552 rows</text>

  <!-- dim_game_players (bridge-like) -->
  <rect x="270" y="200" width="200" height="160" rx="6" fill="#2a1a3a" stroke="#aa66ff" stroke-width="2"/>
  <rect x="270" y="200" width="200" height="28" rx="6" fill="#aa66ff"/>
  <text x="370" y="220" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_game_players</text>
  <text x="280" y="242" fill="#00ff88" font-size="10">PK player_game_key</text>
  <text x="280" y="258" fill="#ff8800" font-size="10">FK game_id</text>
  <text x="280" y="274" fill="#ff8800" font-size="10">FK player_id</text>
  <text x="280" y="290" fill="#888" font-size="10">player_game_number</text>
  <text x="280" y="306" fill="#888" font-size="10">player_team</text>
  <text x="280" y="322" fill="#888" font-size="10">player_venue</text>
  <text x="280" y="338" fill="#888" font-size="10">skill_rating</text>

  <!-- ========== FACT TABLES (CENTER) ========== -->

  <!-- fact_events -->
  <rect x="500" y="80" width="220" height="220" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="500" y="80" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="610" y="100" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">fact_events</text>
  <text x="510" y="122" fill="#00ff88" font-size="10">PK event_key</text>
  <text x="510" y="138" fill="#ff8800" font-size="10">FK game_id</text>
  <text x="510" y="154" fill="#ff8800" font-size="10">FK shift_key</text>
  <text x="510" y="170" fill="#888" font-size="10">event_index</text>
  <text x="510" y="186" fill="#888" font-size="10">event_type</text>
  <text x="510" y="202" fill="#888" font-size="10">event_detail</text>
  <text x="510" y="218" fill="#888" font-size="10">event_successful</text>
  <text x="510" y="234" fill="#888" font-size="10">period</text>
  <text x="510" y="250" fill="#888" font-size="10">time_start_seconds</text>
  <text x="510" y="266" fill="#888" font-size="10">x_coord, y_coord</text>
  <text x="510" y="282" fill="#666" font-size="9">24,089 rows</text>

  <!-- fact_shifts -->
  <rect x="500" y="330" width="220" height="180" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="500" y="330" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="610" y="350" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">fact_shifts</text>
  <text x="510" y="372" fill="#00ff88" font-size="10">PK shift_key</text>
  <text x="510" y="388" fill="#ff8800" font-size="10">FK game_id</text>
  <text x="510" y="404" fill="#888" font-size="10">shift_index</text>
  <text x="510" y="420" fill="#888" font-size="10">period</text>
  <text x="510" y="436" fill="#888" font-size="10">shift_start_seconds</text>
  <text x="510" y="452" fill="#888" font-size="10">shift_duration</text>
  <text x="510" y="468" fill="#888" font-size="10">situation, strength</text>
  <text x="510" y="484" fill="#888" font-size="10">skill_differential</text>
  <text x="510" y="500" fill="#666" font-size="9">770 rows</text>

  <!-- fact_box_score -->
  <rect x="500" y="540" width="220" height="200" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="500" y="540" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="610" y="560" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">fact_box_score</text>
  <text x="510" y="582" fill="#00ff88" font-size="10">PK player_game_key</text>
  <text x="510" y="598" fill="#ff8800" font-size="10">FK game_id</text>
  <text x="510" y="614" fill="#888" font-size="10">goals, assists, points</text>
  <text x="510" y="630" fill="#888" font-size="10">shots, shots_on_goal</text>
  <text x="510" y="646" fill="#888" font-size="10">toi_seconds, shifts</text>
  <text x="510" y="662" fill="#888" font-size="10">plus_minus</text>
  <text x="510" y="678" fill="#888" font-size="10">faceoffs, zone_entries</text>
  <text x="510" y="694" fill="#888" font-size="10">goals_per_60, points_per_60</text>
  <text x="510" y="724" fill="#666" font-size="9">Aggregated stats</text>

  <!-- ========== BRIDGE TABLES (RIGHT) ========== -->

  <!-- fact_event_players -->
  <rect x="760" y="100" width="200" height="160" rx="6" fill="#3a2a1a" stroke="#ff8800" stroke-width="2"/>
  <rect x="760" y="100" width="200" height="28" rx="6" fill="#ff8800"/>
  <text x="860" y="120" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">fact_event_players</text>
  <text x="770" y="142" fill="#00ff88" font-size="10">PK event_player_key</text>
  <text x="770" y="158" fill="#ff8800" font-size="10">FK event_key</text>
  <text x="770" y="174" fill="#ff8800" font-size="10">FK player_game_key</text>
  <text x="770" y="190" fill="#888" font-size="10">player_role</text>
  <text x="770" y="206" fill="#888" font-size="10">play_detail1</text>
  <text x="770" y="222" fill="#888" font-size="10">is_primary_player</text>
  <text x="770" y="238" fill="#666" font-size="9">Many-to-many bridge</text>

  <!-- fact_shift_players -->
  <rect x="760" y="290" width="200" height="160" rx="6" fill="#3a2a1a" stroke="#ff8800" stroke-width="2"/>
  <rect x="760" y="290" width="200" height="28" rx="6" fill="#ff8800"/>
  <text x="860" y="310" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">fact_shift_players</text>
  <text x="770" y="332" fill="#00ff88" font-size="10">PK shift_player_key</text>
  <text x="770" y="348" fill="#ff8800" font-size="10">FK shift_key</text>
  <text x="770" y="364" fill="#ff8800" font-size="10">FK player_game_key</text>
  <text x="770" y="380" fill="#888" font-size="10">position_slot</text>
  <text x="770" y="396" fill="#888" font-size="10">shift_duration</text>
  <text x="770" y="412" fill="#888" font-size="10">plus_minus</text>
  <text x="770" y="428" fill="#666" font-size="9">Many-to-many bridge</text>

  <!-- More dimension tables -->
  <rect x="980" y="100" width="180" height="120" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="980" y="100" width="180" height="28" rx="6" fill="#00d4ff"/>
  <text x="1070" y="120" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_event_type</text>
  <text x="990" y="142" fill="#00ff88" font-size="10">PK event_type_id</text>
  <text x="990" y="158" fill="#888" font-size="10">event_type</text>
  <text x="990" y="174" fill="#888" font-size="10">event_category</text>
  <text x="990" y="190" fill="#888" font-size="10">is_shot</text>

  <rect x="980" y="250" width="180" height="100" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="980" y="250" width="180" height="28" rx="6" fill="#00d4ff"/>
  <text x="1070" y="270" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_zone</text>
  <text x="990" y="292" fill="#00ff88" font-size="10">PK zone_id</text>
  <text x="990" y="308" fill="#888" font-size="10">zone_name (OZ/NZ/DZ)</text>
  <text x="990" y="324" fill="#888" font-size="10">zone_type</text>

  <rect x="980" y="380" width="180" height="100" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="980" y="380" width="180" height="28" rx="6" fill="#00d4ff"/>
  <text x="1070" y="400" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold">dim_period</text>
  <text x="990" y="422" fill="#00ff88" font-size="10">PK period_id</text>
  <text x="990" y="438" fill="#888" font-size="10">period_name (1st, 2nd...)</text>
  <text x="990" y="454" fill="#888" font-size="10">period_type</text>

  <!-- RELATIONSHIPS (lines) -->
  <!-- dim_schedule to fact_events -->
  <line x1="230" y1="540" x2="500" y2="200" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- dim_schedule to fact_shifts -->
  <line x1="230" y1="540" x2="500" y2="420" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- dim_game_players to fact_events (via bridge) -->
  <line x1="470" y1="280" x2="500" y2="200" stroke="#666" stroke-width="1" stroke-dasharray="4"/>
  
  <!-- fact_events to fact_event_players -->
  <line x1="720" y1="180" x2="760" y2="180" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- fact_shifts to fact_shift_players -->
  <line x1="720" y1="420" x2="760" y2="370" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>

</svg>
</div>

<div class="legend">
    <div class="legend-item">
        <div class="legend-box" style="background: #00d4ff;"></div>
        <span>Dimension Table</span>
    </div>
    <div class="legend-item">
        <div class="legend-box" style="background: #00ff88;"></div>
        <span>Fact Table</span>
    </div>
    <div class="legend-item">
        <div class="legend-box" style="background: #ff8800;"></div>
        <span>Bridge Table</span>
    </div>
    <div class="legend-item">
        <div class="legend-box" style="background: #aa66ff;"></div>
        <span>Game-Player Link</span>
    </div>
</div>

<p class="caption">BenchSight Star Schema - Optimized for analytics queries and Power BI</p>

</body>
</html>
