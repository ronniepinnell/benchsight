<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1100 750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 6 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1100" height="750" fill="#0a0a0f"/>

  <!-- Title -->
  <text x="550" y="30" text-anchor="middle" fill="#00d4ff" font-size="18" font-weight="bold" font-family="Arial, sans-serif">BENCHSIGHT DATABASE SCHEMA (Star Schema - hockey_mart)</text>

  <!-- ========== DIMENSION TABLES ========== -->
  
  <!-- dim_player -->
  <rect x="30" y="60" width="200" height="180" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="60" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="80" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_player</text>
  <text x="40" y="102" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK player_id VARCHAR(20)</text>
  <text x="40" y="118" fill="#888" font-size="10" font-family="Arial, sans-serif">player_full_name</text>
  <text x="40" y="134" fill="#888" font-size="10" font-family="Arial, sans-serif">display_name</text>
  <text x="40" y="150" fill="#888" font-size="10" font-family="Arial, sans-serif">primary_position</text>
  <text x="40" y="166" fill="#888" font-size="10" font-family="Arial, sans-serif">skill_rating DECIMAL(3,1)</text>
  <text x="40" y="182" fill="#888" font-size="10" font-family="Arial, sans-serif">player_hand</text>
  <text x="40" y="198" fill="#888" font-size="10" font-family="Arial, sans-serif">birth_year</text>
  <text x="40" y="224" fill="#666" font-size="9" font-family="Arial, sans-serif">335 rows</text>

  <!-- dim_team -->
  <rect x="30" y="270" width="200" height="150" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="270" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="290" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_team</text>
  <text x="40" y="312" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK team_id VARCHAR(20)</text>
  <text x="40" y="328" fill="#888" font-size="10" font-family="Arial, sans-serif">team_name</text>
  <text x="40" y="344" fill="#888" font-size="10" font-family="Arial, sans-serif">team_cd</text>
  <text x="40" y="360" fill="#888" font-size="10" font-family="Arial, sans-serif">team_color1, team_color2</text>
  <text x="40" y="376" fill="#888" font-size="10" font-family="Arial, sans-serif">league</text>
  <text x="40" y="400" fill="#666" font-size="9" font-family="Arial, sans-serif">26 rows</text>

  <!-- dim_schedule -->
  <rect x="30" y="450" width="200" height="180" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="30" y="450" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="130" y="470" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_schedule</text>
  <text x="40" y="492" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK game_id INTEGER</text>
  <text x="40" y="508" fill="#888" font-size="10" font-family="Arial, sans-serif">game_date DATE</text>
  <text x="40" y="524" fill="#888" font-size="10" font-family="Arial, sans-serif">home_team_name</text>
  <text x="40" y="540" fill="#888" font-size="10" font-family="Arial, sans-serif">away_team_name</text>
  <text x="40" y="556" fill="#888" font-size="10" font-family="Arial, sans-serif">home_total_goals</text>
  <text x="40" y="572" fill="#888" font-size="10" font-family="Arial, sans-serif">away_total_goals</text>
  <text x="40" y="588" fill="#888" font-size="10" font-family="Arial, sans-serif">video_url</text>
  <text x="40" y="614" fill="#666" font-size="9" font-family="Arial, sans-serif">552 rows</text>

  <!-- dim_game_players (bridge-like) -->
  <rect x="270" y="200" width="200" height="160" rx="6" fill="#2a1a3a" stroke="#aa66ff" stroke-width="2"/>
  <rect x="270" y="200" width="200" height="28" rx="6" fill="#aa66ff"/>
  <text x="370" y="220" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_game_players</text>
  <text x="280" y="242" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK player_game_key</text>
  <text x="280" y="258" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK game_id → dim_schedule</text>
  <text x="280" y="274" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK player_id → dim_player</text>
  <text x="280" y="290" fill="#888" font-size="10" font-family="Arial, sans-serif">player_game_number</text>
  <text x="280" y="306" fill="#888" font-size="10" font-family="Arial, sans-serif">player_team, player_venue</text>
  <text x="280" y="322" fill="#888" font-size="10" font-family="Arial, sans-serif">position, skill_rating</text>

  <!-- ========== FACT TABLES (CENTER) ========== -->

  <!-- fact_events -->
  <rect x="510" y="60" width="220" height="220" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="510" y="60" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="620" y="80" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">fact_events</text>
  <text x="520" y="102" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK event_key VARCHAR(30)</text>
  <text x="520" y="118" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK game_id → dim_schedule</text>
  <text x="520" y="134" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK shift_key → fact_shifts</text>
  <text x="520" y="150" fill="#888" font-size="10" font-family="Arial, sans-serif">event_index INTEGER</text>
  <text x="520" y="166" fill="#888" font-size="10" font-family="Arial, sans-serif">event_type VARCHAR(50)</text>
  <text x="520" y="182" fill="#888" font-size="10" font-family="Arial, sans-serif">event_detail, event_detail_2</text>
  <text x="520" y="198" fill="#888" font-size="10" font-family="Arial, sans-serif">event_successful INTEGER</text>
  <text x="520" y="214" fill="#888" font-size="10" font-family="Arial, sans-serif">period, time_start_seconds</text>
  <text x="520" y="230" fill="#888" font-size="10" font-family="Arial, sans-serif">x_coord, y_coord DECIMAL</text>
  <text x="520" y="262" fill="#666" font-size="9" font-family="Arial, sans-serif">24,089 rows (long format)</text>

  <!-- fact_shifts -->
  <rect x="510" y="310" width="220" height="180" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="510" y="310" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="620" y="330" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">fact_shifts</text>
  <text x="520" y="352" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK shift_key VARCHAR(30)</text>
  <text x="520" y="368" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK game_id → dim_schedule</text>
  <text x="520" y="384" fill="#888" font-size="10" font-family="Arial, sans-serif">shift_index INTEGER</text>
  <text x="520" y="400" fill="#888" font-size="10" font-family="Arial, sans-serif">period INTEGER</text>
  <text x="520" y="416" fill="#888" font-size="10" font-family="Arial, sans-serif">shift_start_seconds</text>
  <text x="520" y="432" fill="#888" font-size="10" font-family="Arial, sans-serif">shift_duration INTEGER</text>
  <text x="520" y="448" fill="#888" font-size="10" font-family="Arial, sans-serif">situation, strength</text>
  <text x="520" y="464" fill="#888" font-size="10" font-family="Arial, sans-serif">skill_differential DECIMAL</text>
  <text x="520" y="480" fill="#666" font-size="9" font-family="Arial, sans-serif">770 rows</text>

  <!-- fact_box_score -->
  <rect x="510" y="520" width="220" height="200" rx="6" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <rect x="510" y="520" width="220" height="28" rx="6" fill="#00ff88"/>
  <text x="620" y="540" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">fact_box_score</text>
  <text x="520" y="562" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK player_game_key</text>
  <text x="520" y="578" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK game_id → dim_schedule</text>
  <text x="520" y="594" fill="#888" font-size="10" font-family="Arial, sans-serif">goals, assists, points</text>
  <text x="520" y="610" fill="#888" font-size="10" font-family="Arial, sans-serif">shots, shots_on_goal</text>
  <text x="520" y="626" fill="#888" font-size="10" font-family="Arial, sans-serif">toi_seconds, shifts</text>
  <text x="520" y="642" fill="#888" font-size="10" font-family="Arial, sans-serif">plus_minus INTEGER</text>
  <text x="520" y="658" fill="#888" font-size="10" font-family="Arial, sans-serif">faceoffs, zone_entries</text>
  <text x="520" y="674" fill="#888" font-size="10" font-family="Arial, sans-serif">goals_per_60, points_per_60</text>
  <text x="520" y="706" fill="#666" font-size="9" font-family="Arial, sans-serif">Aggregated player stats</text>

  <!-- ========== BRIDGE TABLES (RIGHT) ========== -->

  <!-- fact_event_players -->
  <rect x="770" y="80" width="200" height="160" rx="6" fill="#3a2a1a" stroke="#ff8800" stroke-width="2"/>
  <rect x="770" y="80" width="200" height="28" rx="6" fill="#ff8800"/>
  <text x="870" y="100" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">fact_event_players</text>
  <text x="780" y="122" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK event_player_key</text>
  <text x="780" y="138" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK event_key → fact_events</text>
  <text x="780" y="154" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK player_game_key</text>
  <text x="780" y="170" fill="#888" font-size="10" font-family="Arial, sans-serif">player_role VARCHAR(30)</text>
  <text x="780" y="186" fill="#888" font-size="10" font-family="Arial, sans-serif">play_detail1</text>
  <text x="780" y="202" fill="#888" font-size="10" font-family="Arial, sans-serif">is_primary_player</text>
  <text x="780" y="226" fill="#666" font-size="9" font-family="Arial, sans-serif">Many-to-many bridge</text>

  <!-- fact_shift_players -->
  <rect x="770" y="270" width="200" height="160" rx="6" fill="#3a2a1a" stroke="#ff8800" stroke-width="2"/>
  <rect x="770" y="270" width="200" height="28" rx="6" fill="#ff8800"/>
  <text x="870" y="290" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">fact_shift_players</text>
  <text x="780" y="312" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK shift_player_key</text>
  <text x="780" y="328" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK shift_key → fact_shifts</text>
  <text x="780" y="344" fill="#ff8800" font-size="10" font-family="Arial, sans-serif">FK player_game_key</text>
  <text x="780" y="360" fill="#888" font-size="10" font-family="Arial, sans-serif">position_slot VARCHAR(30)</text>
  <text x="780" y="376" fill="#888" font-size="10" font-family="Arial, sans-serif">shift_duration INTEGER</text>
  <text x="780" y="392" fill="#888" font-size="10" font-family="Arial, sans-serif">plus_minus INTEGER</text>
  <text x="780" y="416" fill="#666" font-size="9" font-family="Arial, sans-serif">Many-to-many bridge</text>

  <!-- Lookup dimensions -->
  <rect x="770" y="460" width="200" height="80" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="770" y="460" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="870" y="480" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_event_type</text>
  <text x="780" y="502" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK event_type_id</text>
  <text x="780" y="518" fill="#888" font-size="10" font-family="Arial, sans-serif">event_type, event_category</text>

  <rect x="770" y="560" width="200" height="80" rx="6" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <rect x="770" y="560" width="200" height="28" rx="6" fill="#00d4ff"/>
  <text x="870" y="580" text-anchor="middle" fill="#0a0a0f" font-size="12" font-weight="bold" font-family="Arial, sans-serif">dim_zone / dim_period</text>
  <text x="780" y="602" fill="#00ff88" font-size="10" font-family="Arial, sans-serif">PK zone_id / period_id</text>
  <text x="780" y="618" fill="#888" font-size="10" font-family="Arial, sans-serif">zone_name, period_name</text>

  <!-- RELATIONSHIPS -->
  <line x1="230" y1="540" x2="510" y2="170" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="230" y1="540" x2="510" y2="400" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="470" y1="280" x2="510" y2="170" stroke="#666" stroke-width="1" stroke-dasharray="4"/>
  <line x1="730" y1="170" x2="770" y2="160" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="730" y1="400" x2="770" y2="350" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Legend -->
  <rect x="30" y="660" width="300" height="70" rx="6" fill="#12121a" stroke="#2a2a3a"/>
  <text x="180" y="680" text-anchor="middle" fill="#888" font-size="11" font-weight="bold" font-family="Arial, sans-serif">LEGEND</text>
  <rect x="45" y="692" width="15" height="15" fill="#1a2a3a" stroke="#00d4ff" stroke-width="2"/>
  <text x="68" y="704" fill="#888" font-size="10" font-family="Arial, sans-serif">Dimension</text>
  <rect x="130" y="692" width="15" height="15" fill="#1a3a2a" stroke="#00ff88" stroke-width="2"/>
  <text x="153" y="704" fill="#888" font-size="10" font-family="Arial, sans-serif">Fact</text>
  <rect x="195" y="692" width="15" height="15" fill="#3a2a1a" stroke="#ff8800" stroke-width="2"/>
  <text x="218" y="704" fill="#888" font-size="10" font-family="Arial, sans-serif">Bridge</text>
  <rect x="270" y="692" width="15" height="15" fill="#2a1a3a" stroke="#aa66ff" stroke-width="2"/>
  <text x="293" y="704" fill="#888" font-size="10" font-family="Arial, sans-serif">Link</text>

</svg>
