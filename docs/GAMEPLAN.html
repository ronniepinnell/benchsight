<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<title>GAMEPLAN</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; max-width: 900px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }
h1, h2, h3 { color: #1a1a2e; }
h1 { border-bottom: 2px solid #e94560; padding-bottom: 10px; }
h2 { border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 30px; }
code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-size: 0.9em; }
pre { background: #1a1a2e; color: #e0e0e0; padding: 15px; border-radius: 5px; overflow-x: auto; }
pre code { background: transparent; color: inherit; }
table { border-collapse: collapse; width: 100%; margin: 20px 0; }
th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
th { background: #f4f4f4; }
a { color: #e94560; }
blockquote { border-left: 4px solid #e94560; margin: 20px 0; padding-left: 20px; color: #666; }
ul, ol { padding-left: 25px; }
li { margin: 5px 0; }
</style>
</head><body><h1>BenchSight Development Gameplan</h1>
<h2>Current State (January 2026)</h2>
<h3>What's Working ✅</h3>
<ol>
<li><strong>Tracker v22</strong> - Full-featured game tracking interface</li>
<li>12 event types with keyboard shortcuts</li>
<li>6+6 player slots per event</li>
<li>Puck XY tracking (10 points per event)</li>
<li>Player XY tracking</li>
<li>Net location picker for shots</li>
<li>Undo/redo with 50-step history</li>
<li>Import/export Excel</li>
<li>
<p>Supabase push/pull</p>
</li>
<li>
<p><strong>Dashboard v4</strong> - NHL-style analytics</p>
</li>
<li>6 views (Overview, Box Score, Shot Chart, Players, Advanced, H2H)</li>
<li>Team comparison bars</li>
<li>Shot chart with filtering</li>
<li>
<p>Player cards and stats</p>
</li>
<li>
<p><strong>Backend API</strong> - tracker_api.py</p>
</li>
<li>CLI and HTTP endpoints</li>
<li>Full CRUD for tracking data</li>
<li>
<p>ETL trigger support</p>
</li>
<li>
<p><strong>Data Model</strong> - 111 tables defined</p>
</li>
<li>Dimension tables for reference data</li>
<li>Fact tables for tracking data</li>
<li>XY coordinate tables (long and wide formats)</li>
</ol>
<h3>What Needs Work ⚠️</h3>
<ol>
<li><strong>ETL Pipeline</strong> - Previous developer deleted working code</li>
<li>Need to restore stat calculations</li>
<li>Aggregation pipelines incomplete</li>
<li>
<p>QA validation needs testing</p>
</li>
<li>
<p><strong>Data Accuracy</strong> - Verify against ground truth</p>
</li>
<li>Goals must match noradhockey.com</li>
<li>Player stats need validation</li>
<li>
<p>XY data storage untested</p>
</li>
<li>
<p><strong>Linked Events</strong> - Logic was lost</p>
</li>
<li>Shot → Save chains</li>
<li>Pass → Receive chains</li>
<li>Need to restore from specifications</li>
</ol>
<hr />
<h2>Priority 1: Immediate Testing (This Week)</h2>
<h3>Day 1: Tracker Validation</h3>
<pre><code class="language-bash"># 1. Open tracker
open tracker/tracker_v22.html

# 2. Load game 18969 (has video, roster)
# 3. Track 5 test events with XY data
# 4. Push to Supabase
# 5. Verify data in Supabase dashboard
</code></pre>
<h3>Day 2: Dashboard Validation</h3>
<pre><code class="language-bash"># 1. Open dashboard
open dashboard/dashboard_v4.html

# 2. Load game 18969
# 3. Check all 6 views
# 4. Verify stats match tracker data
</code></pre>
<h3>Day 3: API Testing</h3>
<pre><code class="language-bash"># Test all API endpoints
python scripts/tracker_api.py --action list-games
python scripts/tracker_api.py --action get-game --game-id 18969
python scripts/tracker_api.py --action export-csv --game-id 18969
</code></pre>
<hr />
<h2>Priority 2: ETL Restoration (Week 2)</h2>
<h3>Step 1: Audit Current Tables</h3>
<pre><code class="language-python"># Check which tables have data
from scripts.tracker_api import TrackerAPI
api = TrackerAPI()

# List tables with row counts
for table in ['fact_events', 'fact_shifts', 'fact_player_game_stats']:
    data = api.client.table(table).select('*', count='exact').execute()
    print(f&quot;{table}: {data.count} rows&quot;)
</code></pre>
<h3>Step 2: Restore Stat Calculations</h3>
<p>Focus on these derived tables:
1. <code>fact_player_game_stats</code> - Per-game player stats
2. <code>fact_team_game_stats</code> - Per-game team stats
3. <code>fact_player_micro_stats</code> - Detailed micro-statistics
4. <code>fact_scoring_chances</code> - Scoring chance calculations</p>
<h3>Step 3: Implement QA Suite</h3>
<pre><code class="language-bash"># Run validation
python scripts/qa_comprehensive.py --game-id 18969

# Expected output:
# ✅ Goals match: 3-2 (noradhockey.com verified)
# ✅ Event count: 245 events
# ✅ Shift count: 42 shifts
# ⚠️ Missing XY data: 12 events
</code></pre>
<hr />
<h2>Priority 3: Feature Completion (Week 3-4)</h2>
<h3>Tracker Enhancements</h3>
<ul>
<li>[ ] Video API integration (YouTube seek/play)</li>
<li>[ ] Bulk event operations</li>
<li>[ ] Event templates for common patterns</li>
<li>[ ] Mobile-responsive layout</li>
</ul>
<h3>Dashboard Enhancements</h3>
<ul>
<li>[ ] Player radar charts (like Evolving Hockey)</li>
<li>[ ] Line combination tool (like Natural Stat Trick)</li>
<li>[ ] Expected Goals (xG) visualization</li>
<li>[ ] Heat maps for shot/event density</li>
</ul>
<h3>Analytics Features</h3>
<ul>
<li>[ ] xG model implementation</li>
<li>[ ] WAR calculations</li>
<li>[ ] RAPM breakdowns</li>
<li>[ ] Zone time analysis</li>
</ul>
<hr />
<h2>Priority 4: Production Polish (Week 5-6)</h2>
<h3>Error Handling</h3>
<ul>
<li>[ ] Graceful API failures</li>
<li>[ ] Offline mode for tracker</li>
<li>[ ] Conflict resolution for concurrent edits</li>
</ul>
<h3>Performance</h3>
<ul>
<li>[ ] Lazy loading for large datasets</li>
<li>[ ] Pagination for event lists</li>
<li>[ ] Caching for reference data</li>
</ul>
<h3>Documentation</h3>
<ul>
<li>[ ] User guide with screenshots</li>
<li>[ ] Video tutorial for tracking workflow</li>
<li>[ ] API documentation (OpenAPI spec)</li>
</ul>
<hr />
<h2>Technical Debt</h2>
<h3>Code Quality</h3>
<ul>
<li>[ ] Add TypeScript types to tracker</li>
<li>[ ] Unit tests for API</li>
<li>[ ] Integration tests for ETL</li>
</ul>
<h3>Data Quality</h3>
<ul>
<li>[ ] Implement data validation rules</li>
<li>[ ] Add audit logging</li>
<li>[ ] Create data lineage tracking</li>
</ul>
<hr />
<h2>Success Metrics</h2>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Current</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tracking time per game</td>
<td>8 hours</td>
<td>1-2 hours</td>
</tr>
<tr>
<td>Events tracked per game</td>
<td>~200</td>
<td>~400+</td>
</tr>
<tr>
<td>XY data coverage</td>
<td>0%</td>
<td>80%+</td>
</tr>
<tr>
<td>Stat accuracy vs official</td>
<td>Unknown</td>
<td>100%</td>
</tr>
<tr>
<td>Dashboard load time</td>
<td>3-5s</td>
<td>&lt;1s</td>
</tr>
</tbody>
</table>
<hr />
<h2>Resources</h2>
<h3>Reference Sites</h3>
<ul>
<li><a href="https://naturalstattrick.com">Natural Stat Trick</a> - Clean data tables</li>
<li><a href="https://evolving-hockey.com">Evolving Hockey</a> - Player radar charts</li>
<li><a href="https://moneypuck.com">Money Puck</a> - xG models</li>
<li><a href="https://hockey-reference.com">Hockey Reference</a> - Box scores</li>
</ul>
<h3>Documentation</h3>
<ul>
<li><code>docs/README.md</code> - Project overview</li>
<li><code>docs/DATA_DICTIONARY.md</code> - Table definitions</li>
<li><code>docs/handoffs/</code> - Developer handoffs</li>
</ul>
<h3>Key Files</h3>
<ul>
<li><code>tracker/tracker_v22.html</code> - Production tracker</li>
<li><code>dashboard/dashboard_v4.html</code> - Analytics dashboard</li>
<li><code>scripts/tracker_api.py</code> - Backend API</li>
<li><code>scripts/flexible_loader.py</code> - Data loader</li>
</ul>
<hr />
<h2>Contact</h2>
<p>For questions or issues:
1. Check documentation first
2. Review code comments
3. Test with sample data
4. Document any bugs found</p>
<hr />
<p><em>Gameplan created: January 2026</em>
<em>Next review: After Phase 1 testing</em></p></body></html>