<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README_FOR_LLM - BenchSight</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Monaco', 'Menlo', monospace; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
        pre code { background: none; color: inherit; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #3498db; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        a { color: #3498db; }
        blockquote { border-left: 4px solid #3498db; margin: 0; padding-left: 20px; color: #666; }
        .nav { background: #2c3e50; padding: 10px; margin-bottom: 20px; border-radius: 5px; }
        .nav a { color: white; margin-right: 15px; text-decoration: none; }
        .nav a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="INDEX.html">Index</a>
        <a href="DEPLOYMENT_GUIDE.html">Deploy</a>
        <a href="STATS_REFERENCE_COMPLETE.html">Stats</a>
        <a href="DATA_DICTIONARY.html">Data Dict</a>
    </div>
<h1>BenchSight - LLM Context Guide</h1>

<h2>What Is This Project?</h2>

<p>BenchSight is a hockey analytics platform for NORAD recreational hockey league. It processes game tracking data into a 96-table data warehouse with 317+ statistical columns per player per game.</p>

<h2>Key Rules for LLM Assistants</h2>

<h3>Event Attribution</h3>
<p>- <code>event_player_1</code> = PRIMARY player (shooter, passer, etc.) - FIRST row per event_index</p>
<p>- <code>event_player_2</code> = Secondary player (assist 1, defender, etc.)</p>
<p>- <code>event_player_3</code> = Tertiary player (assist 2)</p>
<p>- Success: <code>&#x27;s&#x27;</code> = successful, <code>&#x27;u&#x27;</code> = unsuccessful</p>

<h3>Goals Detection</h3>
<p>Goals are tracked TWO ways (must check both):</p>
<p>1. <code>event_type = &#x27;Goal&#x27;</code></p>
<p>2. <code>event_detail IN (&#x27;Shot Goal&#x27;, &#x27;Goal Scored&#x27;)</code></p>

<h3>Data Flow</h3>
<pre><code>data/raw/games/{game_id}/ → ETL → data/output/*.csv → Supabase
</code></pre>

<h3>Table Naming</h3>
<p>- <code>dim_*</code> = Dimension/lookup tables (44 tables)</p>
<p>- <code>fact_*</code> = Fact/transactional tables (51 tables)</p>
<p>- <code>qa_*</code> = Quality assurance tables (1 table)</p>

<h3>Key Fact Tables</h3>
<p>- <code>fact_player_game_stats</code> - 317 columns per player per game</p>
<p>- <code>fact_events</code> - Raw tracked events</p>
<p>- <code>fact_shifts</code> - Player shift data</p>
<p>- <code>fact_h2h</code> - Head-to-head matchups</p>
<p>- <code>fact_wowy</code> - With Or Without You analysis</p>
<p>- <code>fact_line_combos</code> - Line combination stats</p>

<h3>Before Packaging</h3>
<p>Always run: <code>scripts/verify_delivery.py</code></p>
<p>Verify goals match: noradhockey.com</p>

<h3>Stats Reference</h3>
<p>See <code>docs/STATS_REFERENCE_COMPLETE.md</code> for all 317 columns with:</p>
<p>- Formulas</p>
<p>- Plain English descriptions</p>
<p>- Good/Bad benchmarks</p>

<h2>File Locations</h2>

<table>
<tr><th>Path</th><th>Contents</th></tr>
<tr><td><code>data/output/</code></td><td>96 CSVs for Supabase</td></tr>
<tr><td><code>data/raw/games/</code></td><td>Source tracking files</td></tr>
<tr><th><code>scripts/flexible_loader.py</code></th><th>Supabase deployment</th></tr>
<tr><th><code>sql/01_CREATE_ALL_TABLES.sql</code></th><th>Create all tables</th></tr>
<tr><th><code>src/main.py</code></th><th>ETL entry point</th></tr>
<tr><th><code>docs/</code></th><th>All documentation</th></tr>
</table>

<h2>Quick Commands</h2>

<pre><code><h1>Deploy to Supabase</h1>
<p>python scripts/flexible_loader.py --scope all --operation replace</p>

<h1>Run ETL</h1>
<p>python src/main.py --games 18969 18977</p>

<h1>Validate</h1>
<p>python scripts/verify_delivery.py</p>
</code></pre>

</body></html>
