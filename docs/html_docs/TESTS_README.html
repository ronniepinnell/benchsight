<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTS_README - BenchSight</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; color: #333; }
        h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: Monaco, monospace; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
        pre code { background: none; color: inherit; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #3498db; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        a { color: #3498db; }
        .nav { background: #2c3e50; padding: 10px; margin-bottom: 20px; border-radius: 5px; }
        .nav a { color: white; margin-right: 15px; text-decoration: none; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="INDEX.html">Index</a>
        <a href="GETTING_STARTED.html">Get Started</a>
        <a href="DEPLOYMENT_GUIDE.html">Deploy</a>
        <a href="CODE_ARCHITECTURE.html">Architecture</a>
        <a href="VALIDATION_GUIDE.html">Validation</a>
        <a href="STATS_REFERENCE_COMPLETE.html">Stats</a>
    </div>
<h1>BenchSight Test Suite</h1>

<h2>Overview</h2>

<p>290 tests covering data integrity, stats calculations, and deployment readiness.</p>

<h2>Running Tests</h2>

<pre><code><h1>Run all tests</h1>
<p>python -m pytest tests/ -v</p>

<h1>Run specific test file</h1>
<p>python -m pytest tests/test_stats_calculations.py -v</p>

<h1>Run with coverage</h1>
<p>python -m pytest tests/ --cov=src --cov-report=html</p>
</code></pre>

<h2>Test Categories</h2>

<h3>test_stats_calculations.py (250+ tests)</h3>
<p>Tests all statistical calculations:</p>
<p>- <strong>Scoring</strong>: goals, assists, points consistency</p>
<p>- <strong>Shooting</strong>: shots, SOG, shooting percentage</p>
<p>- <strong>Passing</strong>: pass attempts, completion rate</p>
<p>- <strong>Faceoffs</strong>: FO wins/losses, FO percentage</p>
<p>- <strong>Time on Ice</strong>: TOI seconds/minutes, shift counts</p>
<p>- <strong>Per-60 Stats</strong>: goals/60, assists/60, etc.</p>
<p>- <strong>Corsi/Fenwick</strong>: possession metrics</p>
<p>- <strong>Plus/Minus</strong>: +/- calculations</p>
<p>- <strong>Composite Ratings</strong>: offensive/defensive ratings</p>

<h3>test_supabase_config.py (15 tests)</h3>
<p>Deployment readiness:</p>
<p>- Configuration files exist</p>
<p>- SQL files exist</p>
<p>- Loader scripts exist</p>
<p>- Documentation complete</p>
<p>- Data files present</p>

<h3>test_validation.py (6 tests)</h3>
<p>Data integrity:</p>
<p>- Output files exist</p>
<p>- Tables have data</p>
<p>- Column counts correct</p>

<h3>test_comprehensive_integrity.py (3 tests)</h3>
<p>Project structure validation</p>

<h3>test_data_integrity.py</h3>
<p>Foreign key relationships and data consistency</p>

<h3>test_etl.py</h3>
<p>ETL pipeline functionality</p>

<h2>Test Data</h2>

<p>Tests use actual data from <code>data/output/</code>:</p>
<p>- <code>fact_player_game_stats.csv</code> - 317 columns</p>
<p>- <code>dim_player.csv</code> - Player dimension</p>
<p>- <code>dim_team.csv</code> - Team dimension</p>

<h2>Adding New Tests</h2>

<pre><code><h1>tests/test_new_feature.py</h1>
<p>import pytest</p>
<p>from pathlib import Path</p>
<p>import pandas as pd</p>

<p>class TestNewFeature:</p>
<p>    def test_something(self):</p>
<p>        df = pd.read_csv(&quot;data/output/fact_player_game_stats.csv&quot;)</p>
<p>        assert len(df) &gt; 0</p>
</code></pre>

<h2>Expected Results</h2>

<p>All 290 tests should pass:</p>
<pre><code>============================= 290 passed in 6.23s ==============================
</code></pre>

</body></html>
