<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VALIDATION_GUIDE - BenchSight</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; color: #333; }
        h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: Monaco, monospace; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
        pre code { background: none; color: inherit; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #3498db; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        a { color: #3498db; }
        .nav { background: #2c3e50; padding: 10px; margin-bottom: 20px; border-radius: 5px; }
        .nav a { color: white; margin-right: 15px; text-decoration: none; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="INDEX.html">Index</a>
        <a href="GETTING_STARTED.html">Get Started</a>
        <a href="DEPLOYMENT_GUIDE.html">Deploy</a>
        <a href="CODE_ARCHITECTURE.html">Architecture</a>
        <a href="VALIDATION_GUIDE.html">Validation</a>
        <a href="STATS_REFERENCE_COMPLETE.html">Stats</a>
    </div>
<h1>BenchSight Data Validation Guide</h1>

<h2>Overview</h2>

<p>Multiple validation layers ensure data accuracy and consistency.</p>

<h2>Validation Scripts</h2>

<h3>1. <code>scripts/validate_against_ground_truth.py</code></h3>
<p>Compares calculated stats against official NORAD website data.</p>

<pre><code>python scripts/validate_against_ground_truth.py
</code></pre>

<strong>Checks:</strong>
<p>- Goals match noradhockey.com</p>
<p>- Assists match noradhockey.com</p>
<p>- Points match noradhockey.com</p>
<p>- Game scores verified</p>

<h3>2. <code>scripts/validate_stats.py</code></h3>
<p>Validates statistical calculations.</p>

<pre><code>python scripts/validate_stats.py
</code></pre>

<strong>Checks:</strong>
<p>- Points = Goals + Assists</p>
<p>- Shooting % = Goals / SOG</p>
<p>- FO % = FO Wins / FO Total</p>
<p>- TOI Minutes = TOI Seconds / 60</p>

<h3>3. <code>scripts/qa_comprehensive.py</code></h3>
<p>Full quality assurance sweep.</p>

<pre><code>python scripts/qa_comprehensive.py
</code></pre>

<strong>Checks:</strong>
<p>- No negative values where impossible</p>
<p>- Percentages between 0-100</p>
<p>- No orphaned foreign keys</p>
<p>- Required fields populated</p>

<h3>4. <code>scripts/qa_dynamic.py</code></h3>
<p>Dynamic validation based on data patterns.</p>

<pre><code>python scripts/qa_dynamic.py
</code></pre>

<h3>5. <code>scripts/etl_validation.py</code></h3>
<p>Post-ETL validation.</p>

<pre><code>python scripts/etl_validation.py
</code></pre>

<h2>Validation Reports</h2>

<h3>Location: <code>data/output/</code></h3>
<p>- <code>ETL_VALIDATION_REPORT.json</code> - ETL validation results</p>
<p>- <code>VALIDATION_REPORT.json</code> - Stats validation results</p>

<h3>Sample Report Structure</h3>
<pre><code>{
<p>  &quot;timestamp&quot;: &quot;2025-12-30T12:00:00&quot;,</p>
<p>  &quot;tables_validated&quot;: 96,</p>
<p>  &quot;rows_validated&quot;: 125000,</p>
<p>  &quot;errors&quot;: [],</p>
<p>  &quot;warnings&quot;: [</p>
<p>    {&quot;table&quot;: &quot;fact_player_game_stats&quot;, &quot;issue&quot;: &quot;2 players with 0 TOI&quot;}</p>
<p>  ],</p>
<p>  &quot;status&quot;: &quot;PASSED&quot;</p>
<p>}</p>
</code></pre>

<h2>QA Table</h2>

<code>qa_suspicious_stats</code> tracks anomalies:
<p>- Unusually high stats</p>
<p>- Potential data entry errors</p>
<p>- Players with missing data</p>

<h2>Manual Verification</h2>

<p>1. <strong>Goal Verification</strong></p>
<p>   - Compare <code>fact_player_game_stats.goals</code> to noradhockey.com box scores</p>
<p>   - Check goal scorers match game reports</p>

<p>2. <strong>Roster Verification</strong></p>
<p>   - Verify player names spelled correctly</p>
<p>   - Check jersey numbers match rosters</p>

<p>3. <strong>Game Verification</strong></p>
<p>   - Final scores match official results</p>
<p>   - Period scores add up correctly</p>

<h2>Known Data Quality Issues</h2>

<p>See <code>docs/HONEST_ASSESSMENT.md</code> for known issues:</p>
<p>- Some tracking files have incomplete shift data</p>
<p>- XY coordinates may have gaps</p>
<p>- Some derived stats depend on tracking quality</p>

<h2>Running Full Validation</h2>

<pre><code><h1>Run all validations</h1>
<p>python scripts/validate_stats.py</p>
<p>python scripts/qa_comprehensive.py</p>
<p>python scripts/validate_against_ground_truth.py</p>

<h1>Run tests</h1>
<p>python -m pytest tests/ -v</p>
</code></pre>

</body></html>
