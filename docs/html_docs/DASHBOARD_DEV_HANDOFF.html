<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DASHBOARD_DEV_HANDOFF - BenchSight</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; color: #333; }
        h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
        pre code { background: none; color: inherit; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #3498db; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        a { color: #3498db; }
        .nav { background: #2c3e50; padding: 10px; margin-bottom: 20px; border-radius: 5px; }
        .nav a { color: white; margin-right: 15px; text-decoration: none; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="INDEX.html">Index</a>
        <a href="DEPLOYMENT_GUIDE.html">Deploy</a>
        <a href="STATS_REFERENCE_COMPLETE.html">Stats</a>
    </div>
<h1>Dashboard Developer Handoff</h1>

<strong>Role:</strong> Dashboard Developer  
<strong>Version:</strong> 2.0  
<strong>Date:</strong> December 30, 2025

<p>---</p>

<h2>Your Mission</h2>

<p>Build an interactive hockey analytics dashboard that provides:</p>
<p>1. Real-time stats and visualizations from Supabase</p>
<p>2. Video integration for every play, event, and shift</p>
<p>3. Deep drill-down from team â†’ line â†’ player â†’ individual events</p>
<p>4. Comparative analytics (H2H, WOWY, line combos)</p>

<p>---</p>

<h2>Quick Start</h2>

<h3>1. Get the Codebase</h3>
<pre><code>unzip benchsight_COMPLETE_FULL.zip
<p>cd benchsight_COMPLETE_FULL</p>
</code></pre>

<h3>2. Review Existing Prototypes</h3>
<pre><code>dashboard/
<p>â”œâ”€â”€ dashboard_v1.html          # Basic stats</p>
<p>â”œâ”€â”€ dashboard_v2_game_select.html</p>
<p>â”œâ”€â”€ power_bi_dashboard.html    # Power BI style</p>
<p>â”œâ”€â”€ shot_chart.html            # Shot visualization</p>
<p>â””â”€â”€ game_review_*.html         # Game review prototypes</p>
</code></pre>

<h3>3. Connect to Supabase</h3>
<pre><code>import { createClient } from &#x27;@supabase/supabase-js&#x27;;

<p>const supabase = createClient(</p>
<p>  &#x27;https://uuaowslhpgyiudmbvqze.supabase.co&#x27;,</p>
<p>  &#x27;YOUR_ANON_KEY&#x27;  // Public read-only key</p>
<p>);</p>
</code></pre>

<p>---</p>

<h2>Data Architecture Overview</h2>

<h3>Fact Tables (Metrics &amp; Events)</h3>

<p>| Table | Rows | Purpose | Key Columns |</p>
<p>|-------|------|---------|-------------|</p>
<p>| <code>fact_player_game_stats</code> | 107 | Per-game player stats | goals, assists, shots, toi |</p>
<p>| <code>fact_team_game_stats</code> | 8 | Per-game team stats | shots, goals, possession |</p>
<p>| <code>fact_goalie_game_stats</code> | 8 | Goalie performance | saves, ga, sv_pct |</p>
<p>| <code>fact_events</code> | 5,833 | Individual plays | event_type, timing, zone |</p>
<p>| <code>fact_events_player</code> | 11,635 | Player involvement | player_id, role |</p>
<p>| <code>fact_shifts</code> | 672 | Ice time periods | duration, strength |</p>
<p>| <code>fact_shifts_player</code> | 4,626 | Players on shifts | toi, plus_minus |</p>
<p>| <code>fact_h2h</code> | 684 | Head-to-head matchups | player pairs |</p>
<p>| <code>fact_wowy</code> | 641 | With/Without analysis | on/off splits |</p>
<p>| <code>fact_player_boxscore_all</code> | 14,473 | Complete boxscores | all stats |</p>
<p>| <code>fact_line_combos</code> | 332 | Line combinations | toi, goals |</p>
<p>| <code>fact_sequences</code> | 1,088 | Possession sequences | duration, result |</p>
<p>| <code>fact_plays</code> | 2,714 | Play-by-play | sequence context |</p>
<p>| <code>fact_scoring_chances</code> | 451 | Scoring chances | danger level |</p>
<p>| <code>fact_shot_danger</code> | 435 | Shot quality | xG potential |</p>

<h3>Dimension Tables (Lookups)</h3>

<p>| Table | Purpose |</p>
<p>|-------|---------|</p>
<p>| <code>dim_player</code> | Player info (337 players) |</p>
<p>| <code>dim_team</code> | Team info (26 teams) |</p>
<p>| <code>dim_schedule</code> | Game schedule (562 games) |</p>
<p>| <code>dim_season</code> | Season info |</p>
<p>| <code>dim_event_type</code> | Event type lookups |</p>
<p>| <code>dim_zone</code> | Zone definitions |</p>
<p>| <code>dim_situation</code> | Game situations (PP, PK, EV) |</p>
<p>| <code>dim_strength</code> | Strength states (5v5, 5v4, etc.) |</p>

<p>---</p>

<h2>Key Queries</h2>

<h3>Player Stats for a Game</h3>

<pre><code>async function getPlayerGameStats(gameId) {
<p>  const { data, error } = await supabase</p>
<p>    .from(&#x27;fact_player_game_stats&#x27;)</p>
<p>    .select(<code></p>
<p>      player_id,</p>
<p>      player_name,</p>
<p>      goals,</p>
<p>      assists,</p>
<p>      points,</p>
<p>      shots,</p>
<p>      sog,</p>
<p>      shooting_pct,</p>
<p>      toi_minutes,</p>
<p>      fo_pct,</p>
<p>      hits,</p>
<p>      blocks,</p>
<p>      giveaways,</p>
<p>      takeaways,</p>
<p>      plus_minus</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .order(&#x27;points&#x27;, { ascending: false });</p>
    
<p>  return data;</p>
<p>}</p>
</code></pre>

<h3>Team Stats Comparison</h3>

<pre><code>async function getTeamComparison(gameId) {
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_team_game_stats&#x27;)</p>
<p>    .select(&#x27;*&#x27;)</p>
<p>    .eq(&#x27;game_id&#x27;, gameId);</p>
    
<p>  // Returns home and away team stats</p>
<p>  return {</p>
<p>    home: data.find(t =&gt; t.venue === &#x27;Home&#x27;),</p>
<p>    away: data.find(t =&gt; t.venue === &#x27;Away&#x27;)</p>
<p>  };</p>
<p>}</p>
</code></pre>

<h3>Events with Video Timing</h3>

<pre><code>async function getEventsWithVideo(gameId) {
<p>  // Get game video info</p>
<p>  const { data: game } = await supabase</p>
<p>    .from(&#x27;dim_schedule&#x27;)</p>
<p>    .select(&#x27;video_url, video_start_time&#x27;)</p>
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .single();</p>
    
<p>  // Get events</p>
<p>  const { data: events } = await supabase</p>
<p>    .from(&#x27;fact_events&#x27;)</p>
<p>    .select(<code></p>
<p>      event_key,</p>
<p>      event_index,</p>
<p>      period,</p>
<p>      event_type,</p>
<p>      event_detail,</p>
<p>      event_successful,</p>
<p>      running_video_time,</p>
<p>      time_start_total_seconds,</p>
<p>      home_team,</p>
<p>      away_team,</p>
<p>      zone_id</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .order(&#x27;event_index&#x27;);</p>
    
<p>  // Add video URLs</p>
<p>  return events.map(e =&gt; ({</p>
<p>    ...e,</p>
<p>    videoUrl: buildVideoUrl(game.video_url, e.running_video_time)</p>
<p>  }));</p>
<p>}</p>

<p>function buildVideoUrl(baseUrl, seconds) {</p>
<p>  // YouTube format</p>
<p>  if (baseUrl.includes(&#x27;youtube&#x27;)) {</p>
<p>    return <code>${baseUrl}&amp;t=${Math.floor(seconds)}s</code>;</p>
<p>  }</p>
<p>  // Vimeo format</p>
<p>  if (baseUrl.includes(&#x27;vimeo&#x27;)) {</p>
<p>    return <code>${baseUrl}#t=${Math.floor(seconds)}s</code>;</p>
<p>  }</p>
<p>  return baseUrl;</p>
<p>}</p>
</code></pre>

<h3>Player Head-to-Head</h3>

<pre><code>async function getH2H(gameId, playerId) {
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_h2h&#x27;)</p>
<p>    .select(<code></p>
<p>      player_id,</p>
<p>      opp_player_id,</p>
<p>      player_name,</p>
<p>      opp_player_name,</p>
<p>      toi_together,</p>
<p>      goals_for,</p>
<p>      goals_against,</p>
<p>      shots_for,</p>
<p>      shots_against,</p>
<p>      xg_for,</p>
<p>      xg_against</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .eq(&#x27;player_id&#x27;, playerId);</p>
    
<p>  return data;</p>
<p>}</p>
</code></pre>

<h3>WOWY (With Or Without You)</h3>

<pre><code>async function getWOWY(gameId, playerId) {
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_wowy&#x27;)</p>
<p>    .select(<code></p>
<p>      player_id,</p>
<p>      teammate_id,</p>
<p>      player_name,</p>
<p>      teammate_name,</p>
<p>      toi_with,</p>
<p>      toi_without,</p>
<p>      goals_with,</p>
<p>      goals_without,</p>
<p>      cf_pct_with,</p>
<p>      cf_pct_without</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .eq(&#x27;player_id&#x27;, playerId);</p>
    
<p>  return data;</p>
<p>}</p>
</code></pre>

<h3>Line Combinations</h3>

<pre><code>async function getLineCombos(gameId) {
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_line_combos&#x27;)</p>
<p>    .select(<code></p>
<p>      line_id,</p>
<p>      player_1_name,</p>
<p>      player_2_name,</p>
<p>      player_3_name,</p>
<p>      toi_minutes,</p>
<p>      goals_for,</p>
<p>      goals_against,</p>
<p>      shots_for,</p>
<p>      shots_against,</p>
<p>      cf_pct</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .order(&#x27;toi_minutes&#x27;, { ascending: false });</p>
    
<p>  return data;</p>
<p>}</p>
</code></pre>

<p>---</p>

<h2>Video Integration</h2>

<h3>CRITICAL: Video Pop-up Component</h3>

<p>Every event, shift, and play should have a video link:</p>

<pre><code>// Video Player Component
<p>function VideoPopup({ videoUrl, startTime, endTime, title }) {</p>
<p>  const [isOpen, setIsOpen] = useState(false);</p>
  
<p>  const url = buildVideoUrl(videoUrl, startTime);</p>
  
<p>  return (</p>
<p>    &lt;&gt;</p>
<p>      &lt;button onClick={() =&gt; setIsOpen(true)}&gt;â–¶ Watch&lt;/button&gt;</p>
      
<p>      {isOpen &amp;&amp; (</p>
<p>        &lt;div className=&quot;video-modal&quot;&gt;</p>
<p>          &lt;h3&gt;{title}&lt;/h3&gt;</p>
<p>          &lt;iframe </p>
<p>            src={url}</p>
<p>            width=&quot;800&quot; </p>
<p>            height=&quot;450&quot;</p>
<p>            allowFullScreen</p>
<p>          /&gt;</p>
<p>          &lt;div className=&quot;video-controls&quot;&gt;</p>
<p>            &lt;button onClick={() =&gt; seekTo(startTime)}&gt;Start&lt;/button&gt;</p>
<p>            &lt;button onClick={() =&gt; seekTo(endTime)}&gt;End&lt;/button&gt;</p>
<p>          &lt;/div&gt;</p>
<p>          &lt;button onClick={() =&gt; setIsOpen(false)}&gt;Close&lt;/button&gt;</p>
<p>        &lt;/div&gt;</p>
<p>      )}</p>
<p>    &lt;/&gt;</p>
<p>  );</p>
<p>}</p>
</code></pre>

<h3>Multiple Camera Angles</h3>

<pre><code>async function getVideoAngles(gameId) {
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_video&#x27;)</p>
<p>    .select(&#x27;*&#x27;)</p>
<p>    .eq(&#x27;game_id&#x27;, gameId);</p>
    
<p>  // Returns multiple angles: Main, Goal Cam, Blue Line, etc.</p>
<p>  return data;</p>
<p>}</p>

<p>// In your video popup</p>
<p>function MultiAngleVideoPopup({ gameId, startTime }) {</p>
<p>  const [angles, setAngles] = useState([]);</p>
<p>  const [selectedAngle, setSelectedAngle] = useState(0);</p>
  
<p>  useEffect(() =&gt; {</p>
<p>    getVideoAngles(gameId).then(setAngles);</p>
<p>  }, [gameId]);</p>
  
<p>  return (</p>
<p>    &lt;div className=&quot;multi-angle-video&quot;&gt;</p>
<p>      &lt;div className=&quot;angle-selector&quot;&gt;</p>
<p>        {angles.map((angle, i) =&gt; (</p>
<p>          &lt;button </p>
<p>            key={i}</p>
<p>            className={i === selectedAngle ? &#x27;active&#x27; : &#x27;&#x27;}</p>
<p>            onClick={() =&gt; setSelectedAngle(i)}</p>
<p>          &gt;</p>
<p>            {angle.angle_name}</p>
<p>          &lt;/button&gt;</p>
<p>        ))}</p>
<p>      &lt;/div&gt;</p>
<p>      &lt;iframe src={buildVideoUrl(angles[selectedAngle]?.url, startTime)} /&gt;</p>
<p>    &lt;/div&gt;</p>
<p>  );</p>
<p>}</p>
</code></pre>

<p>---</p>

<h2>Dashboard Layout Recommendations</h2>

<h3>Main Dashboard Hierarchy</h3>

<pre><code>LEVEL 1: LEAGUE OVERVIEW
<p>â”œâ”€â”€ Season standings</p>
<p>â”œâ”€â”€ League leaders</p>
<p>â”œâ”€â”€ Recent games</p>
<p>â””â”€â”€ Upcoming schedule</p>

<p>LEVEL 2: GAME DASHBOARD</p>
<p>â”œâ”€â”€ Score &amp; Game Info</p>
<p>â”œâ”€â”€ Team comparison (shots, possession, etc.)</p>
<p>â”œâ”€â”€ Period-by-period breakdown</p>
<p>â”œâ”€â”€ Key events timeline</p>
<p>â””â”€â”€ Drill down to...</p>

<p>LEVEL 3: TEAM GAME VIEW</p>
<p>â”œâ”€â”€ Player stats table</p>
<p>â”œâ”€â”€ Line combinations</p>
<p>â”œâ”€â”€ Special teams</p>
<p>â”œâ”€â”€ Shot chart</p>
<p>â””â”€â”€ Drill down to...</p>

<p>LEVEL 4: PLAYER GAME VIEW</p>
<p>â”œâ”€â”€ Individual stats</p>
<p>â”œâ”€â”€ Shift-by-shift</p>
<p>â”œâ”€â”€ Event log</p>
<p>â”œâ”€â”€ H2H matchups</p>
<p>â”œâ”€â”€ WOWY splits</p>
<p>â””â”€â”€ Drill down to...</p>

<p>LEVEL 5: EVENT/SHIFT DETAIL</p>
<p>â”œâ”€â”€ Full event info</p>
<p>â”œâ”€â”€ Players involved</p>
<p>â”œâ”€â”€ Video clip</p>
<p>â”œâ”€â”€ Linked events</p>
<p>â””â”€â”€ Context (sequence, play)</p>
</code></pre>

<h3>Component Structure</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<p>â”‚  HEADER: Game Selector | Team Logos | Score | Period/Time      â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                               â”‚                                 â”‚</p>
<p>â”‚     TEAM COMPARISON           â”‚      SHOT CHART                 â”‚</p>
<p>â”‚     (Side-by-side stats)      â”‚      (Interactive rink)         â”‚</p>
<p>â”‚                               â”‚                                 â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                               â”‚                                 â”‚</p>
<p>â”‚     PLAYER STATS TABLE        â”‚      EVENT TIMELINE             â”‚</p>
<p>â”‚     (Sortable, clickable)     â”‚      (Goals, penalties, etc.)   â”‚</p>
<p>â”‚                               â”‚                                 â”‚</p>
<p>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</p>
<p>â”‚                                                                 â”‚</p>
<p>â”‚     DETAIL PANEL (expands on click)                            â”‚</p>
<p>â”‚     Player card | Shift log | Video | H2H | WOWY               â”‚</p>
<p>â”‚                                                                 â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
</code></pre>

<p>---</p>

<h2>Visualization Components</h2>

<h3>Shot Chart</h3>

<pre><code>// Shot locations from fact_shot_xy (if populated)
<p>// Or derive from fact_events with zone info</p>

<p>async function getShotData(gameId) {</p>
<p>  const { data } = await supabase</p>
<p>    .from(&#x27;fact_events&#x27;)</p>
<p>    .select(<code></p>
<p>      event_key,</p>
<p>      event_type,</p>
<p>      event_detail,</p>
<p>      event_successful,</p>
<p>      zone_id,</p>
<p>      running_video_time,</p>
<p>      home_team,</p>
<p>      away_team</p>
    </code>)
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .in(&#x27;event_type&#x27;, [&#x27;Shot&#x27;, &#x27;Goal&#x27;]);</p>
    
<p>  return data;</p>
<p>}</p>

<p>// Render on SVG rink</p>
<p>function ShotChart({ shots }) {</p>
<p>  return (</p>
<p>    &lt;svg viewBox=&quot;0 0 200 85&quot; className=&quot;rink&quot;&gt;</p>
<p>      {/* Rink outline */}</p>
<p>      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;200&quot; height=&quot;85&quot; fill=&quot;#fff&quot; stroke=&quot;#000&quot;/&gt;</p>
<p>      {/* Center line */}</p>
<p>      &lt;line x1=&quot;100&quot; y1=&quot;0&quot; x2=&quot;100&quot; y2=&quot;85&quot; stroke=&quot;red&quot;/&gt;</p>
<p>      {/* Goal creases */}</p>
<p>      &lt;circle cx=&quot;11&quot; cy=&quot;42.5&quot; r=&quot;6&quot; fill=&quot;lightblue&quot;/&gt;</p>
<p>      &lt;circle cx=&quot;189&quot; cy=&quot;42.5&quot; r=&quot;6&quot; fill=&quot;lightblue&quot;/&gt;</p>
      
<p>      {/* Shots */}</p>
<p>      {shots.map(shot =&gt; (</p>
<p>        &lt;circle</p>
<p>          key={shot.event_key}</p>
<p>          cx={shot.x}</p>
<p>          cy={shot.y}</p>
<p>          r={shot.event_type === &#x27;Goal&#x27; ? 5 : 3}</p>
<p>          fill={shot.event_type === &#x27;Goal&#x27; ? &#x27;green&#x27; : &#x27;gray&#x27;}</p>
<p>          onClick={() =&gt; showShotDetail(shot)}</p>
<p>        /&gt;</p>
<p>      ))}</p>
<p>    &lt;/svg&gt;</p>
<p>  );</p>
<p>}</p>
</code></pre>

<h3>Event Timeline</h3>

<pre><code>function EventTimeline({ events, periodLength = 1200 }) {
<p>  const periods = [1, 2, 3];</p>
  
<p>  return (</p>
<p>    &lt;div className=&quot;timeline&quot;&gt;</p>
<p>      {periods.map(period =&gt; (</p>
<p>        &lt;div key={period} className=&quot;period-track&quot;&gt;</p>
<p>          &lt;span&gt;P{period}&lt;/span&gt;</p>
<p>          &lt;div className=&quot;track&quot;&gt;</p>
<p>            {events</p>
<p>              .filter(e =&gt; e.period === period)</p>
<p>              .map(event =&gt; (</p>
<p>                &lt;div</p>
<p>                  key={event.event_key}</p>
<p>                  className={<code>event-marker ${event.event_type.toLowerCase()}</code>}</p>
<p>                  style={{</p>
<p>                    left: <code>${(event.time_start_total_seconds / periodLength) * 100}%</code></p>
<p>                  }}</p>
<p>                  title={<code>${event.event_type}: ${event.event_detail}</code>}</p>
<p>                  onClick={() =&gt; showEventDetail(event)}</p>
<p>                /&gt;</p>
<p>              ))}</p>
<p>          &lt;/div&gt;</p>
<p>        &lt;/div&gt;</p>
<p>      ))}</p>
<p>    &lt;/div&gt;</p>
<p>  );</p>
<p>}</p>
</code></pre>

<h3>Player Comparison Radar</h3>

<pre><code>function PlayerRadar({ player1Stats, player2Stats }) {
<p>  const categories = [</p>
<p>    { key: &#x27;goals_per_60&#x27;, label: &#x27;Goals/60&#x27; },</p>
<p>    { key: &#x27;assists_per_60&#x27;, label: &#x27;Assists/60&#x27; },</p>
<p>    { key: &#x27;shots_per_60&#x27;, label: &#x27;Shots/60&#x27; },</p>
<p>    { key: &#x27;hits_per_60&#x27;, label: &#x27;Hits/60&#x27; },</p>
<p>    { key: &#x27;cf_pct&#x27;, label: &#x27;CF%&#x27; },</p>
<p>    { key: &#x27;xgf_pct&#x27;, label: &#x27;xGF%&#x27; }</p>
<p>  ];</p>
  
<p>  // Normalize to 0-100 scale</p>
<p>  // Draw radar chart with both players</p>
<p>  // Use Chart.js or D3 for rendering</p>
<p>}</p>
</code></pre>

<p>---</p>

<h2>Dashboard Features Checklist</h2>

<h3>Must Have âœ…</h3>

<p>- [ ] Game selector dropdown</p>
<p>- [ ] Team stats comparison</p>
<p>- [ ] Player stats table (sortable)</p>
<p>- [ ] Shot chart visualization</p>
<p>- [ ] Goal/penalty timeline</p>
<p>- [ ] Video links for all events</p>
<p>- [ ] Period-by-period breakdown</p>

<h3>Should Have ğŸ”¶</h3>

<p>- [ ] Player drill-down panels</p>
<p>- [ ] H2H matchup view</p>
<p>- [ ] WOWY splits display</p>
<p>- [ ] Line combination stats</p>
<p>- [ ] Shift-by-shift view</p>
<p>- [ ] Goalie stats card</p>
<p>- [ ] Scoring chance quality</p>

<h3>Nice to Have ğŸ’«</h3>

<p>- [ ] Animated play sequences</p>
<p>- [ ] Heat maps</p>
<p>- [ ] Expected goals (xG) display</p>
<p>- [ ] Zone entry/exit tracking</p>
<p>- [ ] Momentum charts</p>
<p>- [ ] Predictive analytics</p>
<p>- [ ] Export to PDF/image</p>

<p>---</p>

<h2>Data Refresh Strategy</h2>

<h3>Real-time Updates (if tracking live)</h3>

<pre><code>// Subscribe to changes
<p>const subscription = supabase</p>
<p>  .channel(&#x27;game-updates&#x27;)</p>
<p>  .on(&#x27;postgres_changes&#x27;, {</p>
<p>    event: &#x27;INSERT&#x27;,</p>
<p>    schema: &#x27;public&#x27;,</p>
<p>    table: &#x27;fact_events&#x27;,</p>
<p>    filter: <code>game_id=eq.${gameId}</code></p>
<p>  }, payload =&gt; {</p>
<p>    // Add new event to state</p>
<p>    addEvent(payload.new);</p>
<p>  })</p>
<p>  .subscribe();</p>

<p>// Cleanup</p>
<p>return () =&gt; supabase.removeChannel(subscription);</p>
</code></pre>

<h3>Polling (simpler approach)</h3>

<pre><code>useEffect(() =&gt; {
<p>  const interval = setInterval(() =&gt; {</p>
<p>    refreshData();</p>
<p>  }, 30000); // Every 30 seconds</p>
  
<p>  return () =&gt; clearInterval(interval);</p>
<p>}, []);</p>
</code></pre>

<p>---</p>

<h2>Inspiration &amp; Reference</h2>

<h3>NHL-style dashboards to emulate:</h3>
<p>- Natural Stat Trick (naturalstattrick.com)</p>
<p>- Evolving Hockey (evolving-hockey.com)</p>
<p>- Money Puck (moneypuck.com)</p>
<p>- Hockey Reference (hockey-reference.com)</p>

<h3>Key Features from Pros:</h3>

<strong>Natural Stat Trick:</strong>
<p>- Clean data tables</p>
<p>- Shot attempt charts</p>
<p>- Line combination tool</p>
<p>- H2H matchup finder</p>

<strong>Evolving Hockey:</strong>
<p>- Player cards with radar charts</p>
<p>- RAPM breakdowns</p>
<p>- Contract projections</p>
<p>- WAR calculations</p>

<strong>Money Puck:</strong>
<p>- Real-time win probability</p>
<p>- Expected goals charts</p>
<p>- Shot quality breakdowns</p>
<p>- Goalie performance</p>

<p>---</p>

<h2>Performance Tips</h2>

<h3>1. Aggregate on Server</h3>

<pre><code>// BAD: Fetch all events, calculate in browser
<p>const events = await supabase.from(&#x27;fact_events&#x27;).select(&#x27;*&#x27;);</p>
<p>const shots = events.filter(e =&gt; e.event_type === &#x27;Shot&#x27;).length;</p>

<p>// GOOD: Use database aggregation</p>
<p>const { data } = await supabase</p>
<p>  .from(&#x27;fact_events&#x27;)</p>
<p>  .select(&#x27;event_type&#x27;, { count: &#x27;exact&#x27; })</p>
<p>  .eq(&#x27;game_id&#x27;, gameId)</p>
<p>  .eq(&#x27;event_type&#x27;, &#x27;Shot&#x27;);</p>
</code></pre>

<h3>2. Use Views for Complex Queries</h3>

<p>Create Supabase views for commonly used aggregations:</p>

<pre><code>-- In Supabase SQL Editor
<p>CREATE VIEW v_game_summary AS</p>
<p>SELECT </p>
<p>  game_id,</p>
<p>  COUNT(*) FILTER (WHERE event_type = &#x27;Shot&#x27;) as total_shots,</p>
<p>  COUNT(*) FILTER (WHERE event_type = &#x27;Goal&#x27;) as total_goals,</p>
<p>  COUNT(*) FILTER (WHERE event_type = &#x27;Hit&#x27;) as total_hits</p>
<p>FROM fact_events</p>
<p>GROUP BY game_id;</p>
</code></pre>

<h3>3. Lazy Load Details</h3>

<pre><code>// Load summary first
<p>const summary = await getGameSummary(gameId);</p>

<p>// Load details only when user clicks</p>
<p>const loadPlayerDetails = async (playerId) =&gt; {</p>
<p>  setLoading(true);</p>
<p>  const details = await getPlayerDetails(gameId, playerId);</p>
<p>  setPlayerDetails(details);</p>
<p>  setLoading(false);</p>
<p>};</p>
</code></pre>

<p>---</p>

<h2>Testing Your Dashboard</h2>

<h3>Test Games</h3>

<p>| Game ID | Description | Events | Shifts |</p>
<p>|---------|-------------|--------|--------|</p>
<p>| 18969 | Full game, validated | 5,833 | 672 |</p>
<p>| 18977 | Full game | Similar | Similar |</p>
<p>| 18981 | Full game | Similar | Similar |</p>
<p>| 18987 | Full game | Similar | Similar |</p>

<h3>Validation Checks</h3>

<pre><code>// Verify goals match official score
<p>async function validateGoals(gameId) {</p>
<p>  const { data: events } = await supabase</p>
<p>    .from(&#x27;fact_events&#x27;)</p>
<p>    .select(&#x27;*&#x27;)</p>
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .eq(&#x27;event_type&#x27;, &#x27;Goal&#x27;);</p>
    
<p>  const { data: schedule } = await supabase</p>
<p>    .from(&#x27;dim_schedule&#x27;)</p>
<p>    .select(&#x27;home_total_goals, away_total_goals&#x27;)</p>
<p>    .eq(&#x27;game_id&#x27;, gameId)</p>
<p>    .single();</p>
    
<p>  const homeGoals = events.filter(e =&gt; e.team_venue === &#x27;Home&#x27;).length;</p>
<p>  const awayGoals = events.filter(e =&gt; e.team_venue === &#x27;Away&#x27;).length;</p>
  
<p>  console.assert(homeGoals === schedule.home_total_goals);</p>
<p>  console.assert(awayGoals === schedule.away_total_goals);</p>
<p>}</p>
</code></pre>

<p>---</p>

<h2>Resources</h2>

<p>- Prototype Dashboards: <code>dashboard/</code> folder</p>
<p>- Schema: <code>sql/05_FINAL_COMPLETE_SCHEMA.sql</code></p>
<p>- Sample Data: All <code>data/output/*.csv</code> files</p>
<p>- Inspiration: <code>docs/INSPIRATION_AND_RESEARCH.md</code></p>
<p>- Supabase JS Docs: https://supabase.com/docs/reference/javascript</p>

<p>---</p>

<h2>Questions?</h2>

<p>See <code>prompts/dashboard_dev_prompt.md</code> for a prompt to start a new Claude chat with full context.</p>

</body></html>
