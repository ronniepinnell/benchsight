column,type,nullable,description,source,formula,filter_context,tolerance,depends_on,used_by
event_player_key,VARCHAR(20),NO,Primary key for player-event combination,CALCULATED,f'EP{game_id}{row_number:05d}' where row_number is sequential across all events,Per player per event,,"game_id, row order",
event_key,VARCHAR(20),NO,Foreign key to fact_events,CALCULATED,f'EV{game_id}{event_index:05d}',,,"game_id, event_index",fact_events join
game_id,INT,NO,Game identifier,EXPLICIT,From parent event,,,fact_events.game_id,All game aggregations
event_index,INT,NO,Event sequence number,EXPLICIT,From parent event,,,fact_events.event_index,event_key
player_id,VARCHAR(10),YES,Player identifier (P100xxx format),LOOKUP,fact_gameroster.player_id WHERE game_id matches AND player_game_number = jersey_number,,Must exist in fact_gameroster,"player_game_number, fact_gameroster",All player stats
player_game_number,INT,YES,Player jersey number from tracking,EXPLICIT,From tracking: event_team_player_N or opp_team_player_N column value,,1-99,tracking data,player_id lookup
player_name,VARCHAR(100),YES,Player full name,LOOKUP,fact_gameroster.player_full_name WHERE player_id matches,,,"player_id, fact_gameroster",Display only
player_team,VARCHAR(50),YES,Team name player belongs to,DERIVED,team_ prefix (home/away) converted to team name via roster lookup,,,"tracking team_ column, fact_gameroster",Team-level aggregations
player_role,VARCHAR(30),NO,*** CRITICAL *** Player role determines stat attribution,EXPLICIT,"From tracking: role_abrev_ column (event_team_player_1, event_team_player_2, opp_team_player_1, etc.)",,Must be in dim_player_role,tracking data,"CRITICAL FOR ALL STATS:
- event_team_player_1 = PRIMARY ACTOR (gets shot/goal/faceoff win/pass credit)
- opp_team_player_1 = OPPONENT ACTOR (gets faceoff loss, defensive event)
- Other roles = on-ice but not primary actor"
event_type,VARCHAR(30),NO,Type of event (from parent),EXPLICIT,From fact_events.event_type,,,fact_events.event_type,"Stat type determination (Shot→shots, Goal→goals, etc.)"
event_detail,VARCHAR(50),YES,Detailed event outcome,EXPLICIT,From fact_events.event_detail,,,fact_events.event_detail,"SOG filter (Shot_OnNetSaved, Shot_Goal), turnover type (Giveaway_*, Takeaway_*)"
event_detail_2,VARCHAR(50),YES,Secondary event detail,EXPLICIT,From fact_events.event_detail_2,,,fact_events.event_detail_2,"Zone entry type classification, save location classification"
event_successful,VARCHAR(1),YES,Success indicator (s/u),EXPLICIT,From fact_events.event_successful,,s or u,fact_events.event_successful,"Pass completion (event_successful=""s"" AND event_type=""Pass"")"
play_detail1,VARCHAR(50),YES,*** CRITICAL FOR ASSISTS ***,EXPLICIT,From tracking: play_detail1_ column,,,tracking data,"ASSIST DETECTION:
- ""AssistPrimary"" = Primary assist (1st assist on goal)
- ""AssistSecondary"" = Secondary assist (2nd assist on goal)
- linked_event_index connects to the Goal event"
linked_event_index,INT,YES,Links this event to another (assists→goal),EXPLICIT,From tracking: linked_event_index column,,,tracking data,"Assist-goal linking, shot-save chains"
shift_index,INT,YES,Current shift number,EXPLICIT,From fact_events.shift_index,,,fact_events.shift_index,On-ice player tracking
