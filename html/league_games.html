<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BenchSight - All League Games</title>
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-hover: #1a1a24;
            --border: #2a2a3a;
            --text: #e0e0e0;
            --text-dim: #888;
            --accent: #00d4ff;
            --success: #00ff88;
            --warning: #ff8800;
            --danger: #ff4466;
            --purple: #aa66ff;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
            border-bottom: 1px solid var(--border);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo h1 {
            font-size: 24px;
            color: var(--accent);
        }
        
        .logo-icon { font-size: 32px; }
        
        .nav-tabs {
            display: flex;
            gap: 5px;
        }
        
        .nav-tab {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-dim);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .nav-tab:hover, .nav-tab.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .stats-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--accent);
        }
        
        .stat-value.success { color: var(--success); }
        .stat-value.warning { color: var(--warning); }
        .stat-value.purple { color: var(--purple); }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-dim);
            text-transform: uppercase;
            margin-top: 5px;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-label {
            font-size: 13px;
            color: var(--text-dim);
        }
        
        select, input[type="text"] {
            padding: 8px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 14px;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .card-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent);
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        th {
            background: var(--bg-dark);
            color: var(--text-dim);
            font-weight: 500;
            font-size: 11px;
            text-transform: uppercase;
            position: sticky;
            top: 0;
            cursor: pointer;
        }
        
        th:hover { color: var(--accent); }
        
        tr:hover { background: var(--bg-hover); }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .badge-tracked {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success);
        }
        
        .badge-blb {
            background: rgba(0, 212, 255, 0.2);
            color: var(--accent);
        }
        
        .badge-none {
            background: rgba(255, 68, 102, 0.2);
            color: var(--danger);
        }
        
        .score {
            font-weight: 600;
            font-size: 15px;
        }
        
        .score .home { color: var(--accent); }
        .score .away { color: var(--warning); }
        .score .separator { color: var(--text-dim); margin: 0 5px; }
        
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: var(--accent);
            color: #000;
        }
        
        .btn-secondary {
            background: var(--bg-hover);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn:hover { transform: translateY(-1px); }
        
        .game-row td { font-size: 13px; }
        
        .team-name {
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
        }
        
        .page-btn {
            padding: 8px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            cursor: pointer;
        }
        
        .page-btn:hover, .page-btn.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }
        
        .legend {
            display: flex;
            gap: 20px;
            padding: 15px 20px;
            background: var(--bg-dark);
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .events-preview {
            font-size: 11px;
            color: var(--text-dim);
        }
        
        .events-preview .count {
            color: var(--success);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <span class="logo-icon">üèí</span>
            <h1>BenchSight League View</h1>
        </div>
        <div class="nav-tabs">
            <a href="dashboard_static.html" class="nav-tab">Dashboard</a>
            <a href="league_games.html" class="nav-tab active">All Games</a>
            <a href="player_card.html" class="nav-tab">Players</a>
            <a href="tracker_v16.html" class="nav-tab">Tracker</a>
        </div>
    </div>
    
    <div class="container">
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-value">552</div>
                <div class="stat-label">Total Games</div>
            </div>
            <div class="stat-card">
                <div class="stat-value success">8</div>
                <div class="stat-label">Fully Tracked</div>
            </div>
            <div class="stat-card">
                <div class="stat-value warning">543</div>
                <div class="stat-label">BLB Stats Only</div>
            </div>
            <div class="stat-card">
                <div class="stat-value purple">24,089</div>
                <div class="stat-label">Events Tracked</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">335</div>
                <div class="stat-label">Players</div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <span class="badge badge-tracked">TRACKED</span>
                <span>Full event-level data (shots, passes, shifts, etc.)</span>
            </div>
            <div class="legend-item">
                <span class="badge badge-blb">BLB STATS</span>
                <span>Basic stats from league website (G, A, PIM)</span>
            </div>
        </div>
        
        <div class="filters">
            <div class="filter-group">
                <span class="filter-label">Season:</span>
                <select id="seasonFilter" onchange="filterGames()">
                    <option value="">All Seasons</option>
                    <option value="2024-25">2024-25</option>
                    <option value="2023-24">2023-24</option>
                    <option value="2022-23">2022-23</option>
                </select>
            </div>
            <div class="filter-group">
                <span class="filter-label">Data Type:</span>
                <select id="dataFilter" onchange="filterGames()">
                    <option value="">All Games</option>
                    <option value="tracked">Tracked Only</option>
                    <option value="blb">BLB Stats Only</option>
                </select>
            </div>
            <div class="filter-group">
                <span class="filter-label">Team:</span>
                <select id="teamFilter" onchange="filterGames()">
                    <option value="">All Teams</option>
                </select>
            </div>
            <div class="filter-group">
                <span class="filter-label">Search:</span>
                <input type="text" id="searchInput" placeholder="Search teams..." onkeyup="filterGames()">
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <span class="card-title">üìÖ All League Games</span>
                <span id="gameCount" style="color: var(--text-dim); font-size: 13px;">Showing 552 games</span>
            </div>
            <div class="table-wrapper">
                <table id="gamesTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">Date ‚Üï</th>
                            <th onclick="sortTable(1)">Game ID</th>
                            <th onclick="sortTable(2)">Home Team</th>
                            <th onclick="sortTable(3)">Away Team</th>
                            <th onclick="sortTable(4)">Score</th>
                            <th onclick="sortTable(5)">Season</th>
                            <th>Data</th>
                            <th>Details</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="gamesBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="pagination" id="pagination">
                <!-- Pagination buttons -->
            </div>
        </div>
    </div>
    
    <script>
        // Sample game data - in production this would come from CSV/API
        // This shows the structure mixing tracked and BLB-only games
        const GAMES_DATA = [
            // TRACKED GAMES (with full event data)
            { id: 18965, date: '2024-11-05', home: 'Velociraptors', away: 'Orphans', homeScore: 4, awayScore: 3, season: '2024-25', tracked: true, events: 3999, shifts: 98 },
            { id: 18969, date: '2024-11-12', home: 'The Standard', away: 'Aces', homeScore: 5, awayScore: 2, season: '2024-25', tracked: true, events: 3596, shifts: 98 },
            { id: 18977, date: '2024-11-19', home: 'Mongrels', away: 'Wolfpack', homeScore: 3, awayScore: 3, season: '2024-25', tracked: true, events: 2527, shifts: 88 },
            { id: 18981, date: '2024-11-26', home: 'Velociraptors', away: 'Spartans', homeScore: 6, awayScore: 4, season: '2024-25', tracked: true, events: 2428, shifts: 106 },
            { id: 18987, date: '2024-12-03', home: 'Aces', away: 'Mongrels', homeScore: 4, awayScore: 5, season: '2024-25', tracked: true, events: 3084, shifts: 106 },
            { id: 18991, date: '2024-12-10', home: 'The Standard', away: 'Velociraptors', homeScore: 2, awayScore: 4, season: '2024-25', tracked: true, events: 4000, shifts: 78 },
            { id: 18993, date: '2024-12-12', home: 'Orphans', away: 'Wolfpack', homeScore: 3, awayScore: 2, season: '2024-25', tracked: true, events: 456, shifts: 98 },
            { id: 19032, date: '2024-12-17', home: 'Spartans', away: 'Aces', homeScore: 5, awayScore: 5, season: '2024-25', tracked: true, events: 3999, shifts: 98 },
            
            // BLB-ONLY GAMES (sample - would have 543 of these)
            { id: 18900, date: '2024-09-10', home: 'Velociraptors', away: 'The Standard', homeScore: 3, awayScore: 2, season: '2024-25', tracked: false, blbStats: { homeG: 3, homeA: 5, awayG: 2, awayA: 4 } },
            { id: 18901, date: '2024-09-10', home: 'Aces', away: 'Mongrels', homeScore: 4, awayScore: 4, season: '2024-25', tracked: false, blbStats: { homeG: 4, homeA: 6, awayG: 4, awayA: 5 } },
            { id: 18902, date: '2024-09-12', home: 'Orphans', away: 'Spartans', homeScore: 2, awayScore: 5, season: '2024-25', tracked: false, blbStats: { homeG: 2, homeA: 3, awayG: 5, awayA: 8 } },
            { id: 18903, date: '2024-09-12', home: 'Wolfpack', away: 'Velociraptors', homeScore: 1, awayScore: 3, season: '2024-25', tracked: false, blbStats: { homeG: 1, homeA: 2, awayG: 3, awayA: 4 } },
            { id: 18904, date: '2024-09-17', home: 'The Standard', away: 'Aces', homeScore: 6, awayScore: 3, season: '2024-25', tracked: false, blbStats: { homeG: 6, homeA: 9, awayG: 3, awayA: 5 } },
            { id: 18905, date: '2024-09-17', home: 'Mongrels', away: 'Orphans', homeScore: 4, awayScore: 2, season: '2024-25', tracked: false, blbStats: { homeG: 4, homeA: 6, awayG: 2, awayA: 3 } },
            { id: 18800, date: '2024-03-15', home: 'Velociraptors', away: 'Aces', homeScore: 5, awayScore: 4, season: '2023-24', tracked: false, blbStats: { homeG: 5, homeA: 7, awayG: 4, awayA: 6 } },
            { id: 18801, date: '2024-03-15', home: 'The Standard', away: 'Mongrels', homeScore: 3, awayScore: 3, season: '2023-24', tracked: false, blbStats: { homeG: 3, homeA: 4, awayG: 3, awayA: 5 } },
            { id: 18802, date: '2024-03-22', home: 'Spartans', away: 'Wolfpack', homeScore: 2, awayScore: 1, season: '2023-24', tracked: false, blbStats: { homeG: 2, homeA: 3, awayG: 1, awayA: 2 } },
            { id: 18700, date: '2023-11-10', home: 'Orphans', away: 'Velociraptors', homeScore: 4, awayScore: 6, season: '2022-23', tracked: false, blbStats: { homeG: 4, homeA: 5, awayG: 6, awayA: 9 } },
        ];
        
        // Get unique teams
        const teams = [...new Set(GAMES_DATA.flatMap(g => [g.home, g.away]))].sort();
        const teamSelect = document.getElementById('teamFilter');
        teams.forEach(team => {
            const opt = document.createElement('option');
            opt.value = team;
            opt.textContent = team;
            teamSelect.appendChild(opt);
        });
        
        let currentPage = 1;
        const perPage = 25;
        let filteredGames = [...GAMES_DATA];
        
        function filterGames() {
            const season = document.getElementById('seasonFilter').value;
            const dataType = document.getElementById('dataFilter').value;
            const team = document.getElementById('teamFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();
            
            filteredGames = GAMES_DATA.filter(g => {
                if (season && g.season !== season) return false;
                if (dataType === 'tracked' && !g.tracked) return false;
                if (dataType === 'blb' && g.tracked) return false;
                if (team && g.home !== team && g.away !== team) return false;
                if (search && !g.home.toLowerCase().includes(search) && !g.away.toLowerCase().includes(search)) return false;
                return true;
            });
            
            currentPage = 1;
            renderTable();
        }
        
        function renderTable() {
            const tbody = document.getElementById('gamesBody');
            const start = (currentPage - 1) * perPage;
            const pageGames = filteredGames.slice(start, start + perPage);
            
            tbody.innerHTML = pageGames.map(g => `
                <tr class="game-row">
                    <td>${g.date}</td>
                    <td><strong>${g.id}</strong></td>
                    <td class="team-name">${g.home}</td>
                    <td class="team-name">${g.away}</td>
                    <td class="score">
                        <span class="home">${g.homeScore}</span>
                        <span class="separator">-</span>
                        <span class="away">${g.awayScore}</span>
                    </td>
                    <td>${g.season}</td>
                    <td>
                        ${g.tracked 
                            ? `<span class="badge badge-tracked">TRACKED</span>
                               <div class="events-preview"><span class="count">${g.events}</span> events</div>`
                            : `<span class="badge badge-blb">BLB STATS</span>
                               <div class="events-preview">G: ${g.blbStats?.homeG || '-'}-${g.blbStats?.awayG || '-'}</div>`
                        }
                    </td>
                    <td>
                        ${g.tracked 
                            ? `<button class="btn btn-primary" onclick="viewGame(${g.id})">üìä Full Stats</button>`
                            : `<button class="btn btn-secondary" onclick="viewBLBStats(${g.id})">üìã Box Score</button>`
                        }
                    </td>
                    <td>
                        <button class="btn btn-secondary" onclick="trackGame(${g.id})">üéØ Track</button>
                    </td>
                </tr>
            `).join('');
            
            document.getElementById('gameCount').textContent = `Showing ${filteredGames.length} games`;
            renderPagination();
        }
        
        function renderPagination() {
            const totalPages = Math.ceil(filteredGames.length / perPage);
            const pagination = document.getElementById('pagination');
            
            let html = '';
            if (currentPage > 1) {
                html += `<button class="page-btn" onclick="goToPage(${currentPage - 1})">‚Üê Prev</button>`;
            }
            
            for (let i = 1; i <= Math.min(totalPages, 10); i++) {
                html += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">${i}</button>`;
            }
            
            if (currentPage < totalPages) {
                html += `<button class="page-btn" onclick="goToPage(${currentPage + 1})">Next ‚Üí</button>`;
            }
            
            pagination.innerHTML = html;
        }
        
        function goToPage(page) {
            currentPage = page;
            renderTable();
        }
        
        function sortTable(col) {
            // Simple sort toggle
            filteredGames.reverse();
            renderTable();
        }
        
        function viewGame(gameId) {
            window.location.href = `game_summary.html?game=${gameId}`;
        }
        
        function viewBLBStats(gameId) {
            alert(`View BLB box score for game ${gameId}\\n\\nThis would show:\\n- Player goals, assists, PIM\\n- Team totals\\n- Basic game summary\\n\\n(Would load from fact_gameroster data)`);
        }
        
        function trackGame(gameId) {
            window.location.href = `tracker_v16.html?game=${gameId}`;
        }
        
        // Initial render
        renderTable();
    </script>
</body>
</html>
