<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Next Prompt Template</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #1a365d; border-bottom: 3px solid #3182ce; padding-bottom: 10px; }
        h2 { color: #2c5282; margin-top: 30px; border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; }
        h3 { color: #2d3748; }
        code {
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
        }
        pre {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
        }
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #edf2f7;
            font-weight: 600;
        }
        tr:hover { background: #f7fafc; }
        .nav {
            background: #1a365d;
            padding: 15px 20px;
            margin: -40px -40px 30px -40px;
            border-radius: 8px 8px 0 0;
        }
        .nav a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        .nav a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="index.html">Home</a>
            <a href="MASTER_INSTRUCTIONS.html">Master Instructions</a>
            <a href="TRACKER_DEV_COMPLETE_GUIDE.html">Tracker Dev</a>
            <a href="DASHBOARD_DEV_COMPLETE_GUIDE.html">Dashboard Dev</a>
            <a href="SCHEMA_AND_ERD.html">Schema</a>
        </nav>
        <h1 id="benchsight-next-prompt-template">BenchSight - Next Prompt Template</h1>
<p>Copy and paste this prompt to continue work on BenchSight in a new chat session.</p>
<hr />
<h2 id="prompt-start">PROMPT START</h2>
<p>I'm continuing work on BenchSight, a hockey analytics platform for the NORAD recreational hockey league. Here's the current state:</p>
<h3 id="project-overview">Project Overview</h3>
<ul>
<li><strong>ETL Pipeline:</strong> Python-based, transforms raw Excel tracking files to normalized CSVs</li>
<li><strong>Database:</strong> Supabase PostgreSQL at https://uuaowslhpgyiudmbvqze.supabase.co</li>
<li><strong>Status:</strong> 293 tests passing, 317 columns across 51 tables</li>
</ul>
<h3 id="key-tables">Key Tables</h3>
<ul>
<li>fact_events (wide format events)</li>
<li>fact_events_player (long format - player per event)</li>
<li>fact_shifts (shift data with on-ice players)</li>
<li>fact_player_game_stats (29 player metrics per game)</li>
<li>fact_team_game_stats (18 team metrics per game)</li>
<li>fact_goalie_game_stats (19 goalie metrics including microstats)</li>
<li>fact_h2h (head-to-head matchups)</li>
<li>fact_wowy (with-or-without-you analysis)</li>
</ul>
<h3 id="critical-business-rules">Critical Business Rules</h3>
<ol>
<li><strong>player_role is CRITICAL:</strong> Only event_team_player_1 gets stat credit</li>
<li><strong>Shots = Corsi:</strong> All shot attempts (60-70 per team is correct)</li>
<li><strong>Assists in play_detail1:</strong> AssistPrimary, AssistSecondary</li>
<li><strong>Goals via:</strong> event_type "Goal" OR event_detail "Shot_Goal"/"Goal_Scored"</li>
</ol>
<h3 id="known-issues">Known Issues</h3>
<ul>
<li>Pass completion missing in games 18977, 18981, 18987</li>
<li>Assist tracking ~83% match rate (tracking gaps)</li>
<li>Tracker needs fixes for roster loading and event ordering</li>
</ul>
<h3 id="workflow">Workflow</h3>
<pre><code class="language-bash">python etl.py
python scripts/fix_data_integrity.py
python scripts/fix_final_data.py
python scripts/etl_validation.py
pytest tests/
</code></pre>
<h3 id="my-request-today">My Request Today</h3>
<p>[DESCRIBE WHAT YOU WANT TO WORK ON]</p>
<h3 id="attached-files-if-any">Attached Files (if any)</h3>
<p>[DESCRIBE ANY FILES YOU'RE ATTACHING]</p>
<hr />
<h2 id="prompt-end">PROMPT END</h2>
<hr />
<h2 id="alternative-prompts-for-specific-tasks">Alternative Prompts for Specific Tasks</h2>
<h3 id="for-tracker-development">For Tracker Development</h3>
<pre><code>I'm continuing BenchSight tracker development. The tracker is an HTML/JavaScript interface for recording hockey game events. Current issues:
- Roster loading from BLB tables fails
- Event ordering bugs
- Missing games in dropdown

Please help me [SPECIFIC TASK].

Key files: tracker/tracker_v19.html, data/raw/games/{game_id}/
</code></pre>
<h3 id="for-dashboard-development">For Dashboard Development</h3>
<pre><code>I'm starting BenchSight dashboard development. Data is ready in Supabase PostgreSQL. I need dashboards for:
- League standings and leaders
- Team analytics
- Player stats
- Game summaries
- Goalie analytics

Please help me [SPECIFIC TASK].

Database: https://uuaowslhpgyiudmbvqze.supabase.co
Key tables: fact_player_game_stats, fact_team_game_stats, fact_goalie_game_stats
</code></pre>
<h3 id="for-etl-fixes">For ETL Fixes</h3>
<pre><code>I'm fixing BenchSight ETL issues. Current problem:
[DESCRIBE THE ISSUE]

Workflow:
python etl.py → fix_data_integrity.py → fix_final_data.py → etl_validation.py → pytest

Please help me debug/fix this.
</code></pre>
<h3 id="for-data-analysis">For Data Analysis</h3>
<pre><code>I need help analyzing BenchSight data. Question:
[YOUR QUESTION]

Database: Supabase PostgreSQL
Tables: fact_events, fact_player_game_stats, fact_team_game_stats
Ground truth: noradhockey.com game pages
</code></pre>
<hr />
<h2 id="key-file-references">Key File References</h2>
<pre><code>Documentation:
- docs/handoff/MASTER_INSTRUCTIONS.md
- docs/handoff/HONEST_ASSESSMENT_AND_NEXT_STEPS.md
- docs/handoff/SCHEMA_AND_ERD.md

Data:
- data/raw/games/{game_id}/{game_id}_tracking.xlsx
- data/output/*.csv
- data/output/data_dictionary/*.csv

Scripts:
- etl.py
- scripts/fix_data_integrity.py
- scripts/fix_final_data.py
- scripts/etl_validation.py
- scripts/generate_data_dictionary_complete.py

Tests:
- tests/test_etl.py

Tracker:
- tracker/tracker_v19.html
</code></pre>
<hr />
<h2 id="memory-joggers">Memory Joggers</h2>
<p>If Claude doesn't remember something, reference these:</p>
<ul>
<li>"BenchSight uses event_team_player_1 for stat credit"</li>
<li>"Shots = Corsi (all attempts, not just on goal)"</li>
<li>"Assists are in play_detail1 column"</li>
<li>"Primary keys use format {prefix}{game_id}{5d}"</li>
<li>"Always run fix_data_integrity.py after etl.py"</li>
<li>"Check noradhockey.com for ground truth validation"</li>
</ul>
<hr />
<p><em>Last Updated: December 2024</em></p>
    </div>
</body>
</html>
